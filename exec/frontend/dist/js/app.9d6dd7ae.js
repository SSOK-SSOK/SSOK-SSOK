(function(t){function e(e){for(var n,r,a=e[0],c=e[1],u=e[2],h=0,l=[];h<a.length;h++)r=a[h],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(l.length)l.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var c=i[a];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var p=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"006a":function(t,e,i){},"0386":function(t,e,i){"use strict";i("e4be")},"08d1":function(t,e,i){t.exports=i.p+"img/step3.8950e5ab.jpg"},"0a6f":function(t,e,i){},1426:function(t,e,i){"use strict";i("5edb")},"158e":function(t,e,i){"use strict";i("1684")},1684:function(t,e,i){},"1b86":function(t,e,i){t.exports=i.p+"img/cardStep4.33ccfedf.jpg"},"22b3":function(t,e,i){},"23bd":function(t,e,i){},"36d4":function(t,e,i){},"3c43":function(t,e,i){},4242:function(t,e,i){t.exports=i.p+"img/cardStep1.aba22a33.jpg"},"493a":function(t,e,i){var n,o,s=i("7037").default;i("d3b7"),i("1276"),i("ac1f"),i("a434"),i("a15b"),i("b64b"),i("25f0"),i("466d"),i("fb6a"),i("2b3d"),i("3ca3"),i("ddb0"),i("b680"),i("d81d"),i("c19f"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("b0c0"),i("4de4"),i("159b"),i("13d5"),i("5cc6"),i("498a"),i("4c53"),i("5319"),i("a9e3"),
/*! p5.sound.js v0.3.11 2019-03-14 */
function(s,r){n=[i("237d")],o=function(t){r(t)}.apply(e,n),void 0===o||(t.exports=o)}(0,(function(t){var e,i,n,o,r,a,c,u,p,h,l,d,f,m,v,y,g;(function(){(function(){function t(t){t&&(t.setTargetAtTime||(t.setTargetAtTime=t.setTargetValueAtTime))}window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")&&(window.AudioContext=window.webkitAudioContext,"function"!==typeof AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),"function"!==typeof AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),"function"!==typeof AudioContext.prototype.createScriptProcessor&&(AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode),"function"!==typeof AudioContext.prototype.createPeriodicWave&&(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return t(e.gain),e},AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(e){var i=e?this.internal_createDelay(e):this.internal_createDelay();return t(i.delayTime),i},AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.start?(e.internal_start=e.start,e.start=function(t,i,n){"undefined"!==typeof n?e.internal_start(t||0,i,n):e.internal_start(t||0,i||0)}):e.start=function(t,e,i){e||i?this.noteGrainOn(t||0,e,i):this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},t(e.playbackRate),e},AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return t(e.threshold),t(e.knee),t(e.ratio),t(e.reduction),t(e.attack),t(e.release),e},AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();return t(e.frequency),t(e.detune),t(e.Q),t(e.gain),e},"function"!==typeof AudioContext.prototype.createOscillator&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();return e.start?(e.internal_start=e.start,e.start=function(t){e.internal_start(t||0)}):e.start=function(t){this.noteOn(t||0)},e.stop?(e.internal_stop=e.stop,e.stop=function(t){e.internal_stop(t||0)}):e.stop=function(t){this.noteOff(t||0)},e.setPeriodicWave||(e.setPeriodicWave=e.setWaveTable),t(e.frequency),t(e.detune),e})),window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext)})(window),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var e=document.createElement("audio");t.prototype.isSupported=function(){return!!e.canPlayType};var i=function(){return!!e.canPlayType&&e.canPlayType('audio/ogg; codecs="vorbis"')},n=function(){return!!e.canPlayType&&e.canPlayType("audio/mpeg;")},o=function(){return!!e.canPlayType&&e.canPlayType('audio/wav; codecs="1"')},s=function(){return!!e.canPlayType&&(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;"))},r=function(){return!!e.canPlayType&&e.canPlayType("audio/x-aiff;")};t.prototype.isFileSupported=function(t){switch(t.toLowerCase()){case"mp3":return n();case"wav":return o();case"ogg":return i();case"aac":case"m4a":case"mp4":return s();case"aif":case"aiff":return r();default:return!1}}})(),function(t,i){e=function(){return i()}()}(0,(function(){var t=function(t,e){this._dragged=!1,this._element=t,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,e),t.addEventListener("touchstart",this._bindedEnd),t.addEventListener("touchmove",this._bindedMove),t.addEventListener("touchend",this._bindedEnd),t.addEventListener("mouseup",this._bindedEnd)};function e(t){var e=t.createBuffer(1,1,t.sampleRate),i=t.createBufferSource();i.buffer=e,i.connect(t.destination),i.start(0),t.resume&&t.resume()}function i(t){return"running"===t.state}function n(t,e){function n(){i(t)?e():(requestAnimationFrame(n),t.resume&&t.resume())}i(t)?e():n()}function o(e,i,n){if(Array.isArray(e)||NodeList&&e instanceof NodeList)for(var s=0;s<e.length;s++)o(e[s],i,n);else if("string"===typeof e)o(document.querySelectorAll(e),i,n);else if(e.jquery&&"function"===typeof e.toArray)o(e.toArray(),i,n);else if(Element&&e instanceof Element){var r=new t(e,n);i.push(r)}}function s(t,e,i){var s=new Promise((function(e){n(t,e)})),r=[];return e||(e=document.body),o(e,r,t),s.then((function(){for(var t=0;t<r.length;t++)r[t].dispose();r=null,i&&i()})),s}return t.prototype._moved=function(t){this._dragged=!0},t.prototype._ended=function(t){this._dragged||e(t),this._dragged=!1},t.prototype.dispose=function(){this._element.removeEventListener("touchstart",this._bindedEnd),this._element.removeEventListener("touchmove",this._bindedMove),this._element.removeEventListener("touchend",this._bindedEnd),this._element.removeEventListener("mouseup",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},s})),i=function(){"use strict";var t,e=function(t,e){this.isUndef(t)||1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),this.isUndef(e)||1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(t))};return e.prototype.set=function(t,i,n){if(this.isObject(t))n=i;else if(this.isString(t)){var o={};o[t]=i,t=o}t:for(var s in t){i=t[s];var r=this;if(-1!==s.indexOf(".")){for(var a=s.split("."),c=0;c<a.length-1;c++)if(r=r[a[c]],r instanceof e){a.splice(0,c+1);var u=a.join(".");r.set(u,i);continue t}s=a[a.length-1]}var p=r[s];this.isUndef(p)||(e.Signal&&p instanceof e.Signal||e.Param&&p instanceof e.Param?p.value!==i&&(this.isUndef(n)?p.value=i:p.rampTo(i,n)):p instanceof AudioParam?p.value!==i&&(p.value=i):p instanceof e?p.set(i):p!==i&&(r[s]=i))}return this},e.prototype.get=function(t){this.isUndef(t)?t=this._collectDefaults(this.constructor):this.isString(t)&&(t=[t]);for(var i={},n=0;n<t.length;n++){var o=t[n],s=this,r=i;if(-1!==o.indexOf(".")){for(var a=o.split("."),c=0;c<a.length-1;c++){var u=a[c];r[u]=r[u]||{},r=r[u],s=s[u]}o=a[a.length-1]}var p=s[o];this.isObject(t[o])?r[o]=p.get():e.Signal&&p instanceof e.Signal||e.Param&&p instanceof e.Param||p instanceof AudioParam?r[o]=p.value:p instanceof e?r[o]=p.get():this.isFunction(p)||this.isUndef(p)||(r[o]=p)}return i},e.prototype._collectDefaults=function(t){var e=[];if(this.isUndef(t.defaults)||(e=Object.keys(t.defaults)),!this.isUndef(t._super))for(var i=this._collectDefaults(t._super),n=0;n<i.length;n++)-1===e.indexOf(i[n])&&e.push(i[n]);return e},e.prototype.toString=function(){for(var t in e){var i=t[0].match(/^[A-Z]$/),n=e[t]===this.constructor;if(this.isFunction(e[t])&&i&&n)return t}return"Tone"},Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return this.input?this.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return this.output?this.isArray(this.output)?this.output.length:1:0}}),e.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},e.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},e.prototype.disconnect=function(t,e,i){this.isArray(this.output)?this.isNumber(t)?this.output[t].disconnect():(e=this.defaultArg(e,0),this.output[e].disconnect(t,0,i)):this.output.disconnect.apply(this.output,arguments)},e.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},e.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},e.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=e.prototype.chain,AudioNode.prototype.fan=e.prototype.fan,e.prototype.defaultArg=function(t,e){if(this.isObject(t)&&this.isObject(e)){var i={};for(var n in t)i[n]=this.defaultArg(e[n],t[n]);for(var o in e)i[o]=this.defaultArg(t[o],e[o]);return i}return this.isUndef(t)?e:t},e.prototype.optionsObject=function(t,e,i){var n={};if(1===t.length&&this.isObject(t[0]))n=t[0];else for(var o=0;o<e.length;o++)n[e[o]]=t[o];return this.isUndef(i)?n:this.defaultArg(n,i)},e.prototype.isUndef=function(t){return"undefined"===typeof t},e.prototype.isFunction=function(t){return"function"===typeof t},e.prototype.isNumber=function(t){return"number"===typeof t},e.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},e.prototype.isBoolean=function(t){return"boolean"===typeof t},e.prototype.isArray=function(t){return Array.isArray(t)},e.prototype.isString=function(t){return"string"===typeof t},e.noOp=function(){},e.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},e.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},e.State={Started:"started",Stopped:"stopped",Paused:"paused"},e.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},e.prototype.dbToGain=function(t){return Math.pow(2,t/6)},e.prototype.gainToDb=function(t){return Math.log(t)/Math.LN10*20},e.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},e.prototype.now=function(){return e.context.now()},e.now=function(){return e.context.now()},e.extend=function(t,i){function n(){}e.prototype.isUndef(i)&&(i=e),n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=i},Object.defineProperty(e,"context",{get:function(){return t},set:function(i){t=e.Context&&i instanceof e.Context?i:new e.Context(i),e.Context&&e.Context.emit("init",t)}}),Object.defineProperty(e.prototype,"context",{get:function(){return e.context}}),e.setContext=function(t){e.context=t},Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(e,"supported",{get:function(){var t=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),e=window.hasOwnProperty("Promise"),i=window.hasOwnProperty("Worker");return t&&e&&i}}),e.version="r10",window.TONE_SILENCE_VERSION_LOGGING,e}(),function(t){"use strict";t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++){var o=i[n];this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(e)}return this},t.Emitter.prototype.off=function(e,i){for(var n=e.split(/\W+/),o=0;o<n.length;o++)if(e=n[o],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(var s=this._events[e],r=0;r<s.length;r++)s[r]===i&&s.splice(r,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],n=0,o=i.length;n<o;n++)i[n].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","off","emit"];e._events={};for(var n=0;n<i.length;n++){var o=i[n],s=t.Emitter.prototype[o];e[o]=s}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}(i),function(t){function e(){var e=AudioNode.prototype.connect,i=AudioNode.prototype.disconnect;function n(i,n,o){if(i.input)Array.isArray(i.input)?(t.prototype.isUndef(o)&&(o=0),this.connect(i.input[o])):this.connect(i.input,n,o);else try{i instanceof AudioNode?e.call(this,i,n,o):e.call(this,i,n)}catch(s){throw new Error("error connecting to node: "+i+"\n"+s)}}function o(e,n,o){if(e&&e.input&&Array.isArray(e.input))t.prototype.isUndef(o)&&(o=0),this.disconnect(e.input[o],n,o);else if(e&&e.input)this.disconnect(e.input,n,o);else try{i.apply(this,arguments)}catch(s){throw new Error("error disconnecting node: "+e+"\n"+s)}}AudioNode.prototype.connect!==n&&(AudioNode.prototype.connect=n,AudioNode.prototype.disconnect=o)}!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(e){for(var i in t.Emitter.call(this),e||(e=new window.AudioContext),this._context=e,this._context)this._defineProperty(this._context,i);this._latencyHint="interactive",this._lookAhead=.1,this._updateInterval=this._lookAhead/3,this._computedUpdateInterval=0,this._worker=this._createWorker(),this._constants={}},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.prototype._defineProperty=function(t,e){this.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return"function"===typeof t[e]?t[e].bind(t):t[e]},set:function(i){t[e]=i}})},t.Context.prototype.now=function(){return this._context.currentTime},t.Context.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),i=new Worker(e);return i.addEventListener("message",function(){this.emit("tick")}.bind(this)),i.addEventListener("message",function(){var t=this.now();if(this.isNumber(this._lastUpdate)){var e=t-this._lastUpdate;this._computedUpdateInterval=Math.max(e,.97*this._computedUpdateInterval)}this._lastUpdate=t}.bind(this)),i},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),n=0;n<i.length;n++)i[n]=t;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants[t]=o,o},Object.defineProperty(t.Context.prototype,"lag",{get:function(){var t=this._computedUpdateInterval-this._updateInterval;return t=Math.max(t,0),t}}),Object.defineProperty(t.Context.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){this._lookAhead=t}}),Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(e){this._updateInterval=Math.max(e,t.prototype.blockTime),this._worker.postMessage(Math.max(1e3*e,1))}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,this.isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":e=.01;break}this.lookAhead=e,this.updateInterval=e/3}}),t.supported?(e(),t.context=new t.Context):console.warn("This browser does not support Tone.js"),t.Context}(i),n=function(e,i,n){var o=new window.AudioContext;return n.context.dispose(),n.setContext(o),t.prototype.getAudioContext=function(){return o},t.prototype.userStartAudio=function(i,n){var s=i;return i instanceof t.Element?s=i.elt:i instanceof Array&&i[0]instanceof t.Element&&(s=i.map((function(t){return t.elt}))),e(o,s,n)},o}(e,0,i),o=function(e){var i=function(){this.input=e.createGain(),this.output=e.createGain(),this.limiter=e.createDynamicsCompressor(),this.limiter.threshold.value=-3,this.limiter.ratio.value=20,this.limiter.knee.value=1,this.audiocontext=e,this.output.disconnect(),this.input.connect(this.limiter),this.limiter.connect(this.output),this.meter=e.createGain(),this.fftMeter=e.createGain(),this.output.connect(this.meter),this.output.connect(this.fftMeter),this.output.connect(this.audiocontext.destination),this.soundArray=[],this.parts=[],this.extensions=[]},n=new i;return t.prototype.getMasterVolume=function(){return n.output.gain.value},t.prototype.masterVolume=function(t,e,i){if("number"===typeof t){e=e||0,i=i||0;var o=n.audiocontext.currentTime,s=n.output.gain.value;n.output.gain.cancelScheduledValues(o+i),n.output.gain.linearRampToValueAtTime(s,o+i),n.output.gain.linearRampToValueAtTime(t,o+i+e)}else{if(!t)return n.output.gain;t.connect(n.output.gain)}},t.prototype.soundOut=t.soundOut=n,t.soundOut._silentNode=n.audiocontext.createGain(),t.soundOut._silentNode.gain.value=0,t.soundOut._silentNode.connect(n.audiocontext.destination),n}(n),r=function(){var e=o;t.prototype.sampleRate=function(){return e.audiocontext.sampleRate},t.prototype.freqToMidi=function(t){var e=Math.log(t/440)/Math.log(2),i=Math.round(12*e)+69;return i};var i=t.prototype.midiToFreq=function(t){return 440*Math.pow(2,(t-69)/12)},n=function(t){if("string"!==typeof t)return t;var e={A:21,B:23,C:24,D:26,E:28,F:29,G:31},n=e[t[0].toUpperCase()],o=~~t.slice(-1);switch(n+=12*(o-1),t[1]){case"#":n+=1;break;case"b":n-=1;break;default:break}return i(n)};function r(t){var i,n;i=t.getChannelData(0),n=t.numberOfChannels>1?t.getChannelData(1):i;var o=a(i,n),s=new window.ArrayBuffer(44+2*o.length),r=new window.DataView(s);c(r,0,"RIFF"),r.setUint32(4,36+2*o.length,!0),c(r,8,"WAVE"),c(r,12,"fmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,2,!0),r.setUint32(24,e.audiocontext.sampleRate,!0),r.setUint32(28,4*e.audiocontext.sampleRate,!0),r.setUint16(32,4,!0),r.setUint16(34,16,!0),c(r,36,"data"),r.setUint32(40,2*o.length,!0);for(var u=o.length,p=44,h=1,l=0;l<u;l++)r.setInt16(p,o[l]*(32767*h),!0),p+=2;return r}function a(t,e){for(var i=t.length+e.length,n=new Float32Array(i),o=0,s=0;s<i;)n[s++]=t[o],n[s++]=e[o],o++;return n}function c(t,e,i){for(var n=i.length,o=0;o<n;o++)t.setUint8(e+o,i.charCodeAt(o))}return t.prototype.soundFormats=function(){e.extensions=[];for(var t=0;t<arguments.length;t++){if(arguments[t]=arguments[t].toLowerCase(),!(["mp3","wav","ogg","m4a","aac"].indexOf(arguments[t])>-1))throw arguments[t]+" is not a valid sound format!";e.extensions.push(arguments[t])}},t.prototype.disposeSound=function(){for(var t=0;t<e.soundArray.length;t++)e.soundArray[t].dispose()},t.prototype.registerMethod("remove",t.prototype.disposeSound),t.prototype._checkFileFormats=function(i){var n;if("string"===typeof i){n=i;var o=n.split(".").pop();if(["mp3","wav","ogg","m4a","aac"].indexOf(o)>-1)if(t.prototype.isFileSupported(o))n=n;else for(var r=n.split("."),a=r[r.length-1],c=0;c<e.extensions.length;c++){var u=e.extensions[c],p=t.prototype.isFileSupported(u);if(p){a="",2===r.length&&(a+=r[0]);for(c=1;c<=r.length-2;c++){var h=r[c];a+="."+h}n=a+=".",n=n+=u;break}}else for(c=0;c<e.extensions.length;c++){u=e.extensions[c],p=t.prototype.isFileSupported(u);if(p){n=n+"."+u;break}}}else if("object"===s(i))for(c=0;c<i.length;c++){u=i[c].split(".").pop(),p=t.prototype.isFileSupported(u);if(p){n=i[c];break}}return n},t.prototype._mathChain=function(t,e,i,n,o){for(var s in t.mathOps)t.mathOps[s]instanceof o&&(t.mathOps[s].dispose(),i=s,i<t.mathOps.length-1&&(n=t.mathOps[s+1]));return t.mathOps[i-1].disconnect(),t.mathOps[i-1].connect(e),e.connect(n),t.mathOps[i]=e,t},{convertToWav:r,midiToFreq:i,noteToFreq:n}}(),a=function(){var t=function(t,e,i){var n,o=new Error;o.name=t,o.originalStack=o.stack+e,n=o.stack+e,o.failedPath=i;var s=n.split("\n");return s=s.filter((function(t){return!t.match(/(p5.|native code|globalInit)/g)})),o.stack=s.join("\n"),o};return t}(),function(){var e=o,i=e.audiocontext;"undefined"!==typeof i.createStereoPanner?(t.Panner=function(t,e){this.stereoPanner=this.input=i.createStereoPanner(),t.connect(this.stereoPanner),this.stereoPanner.connect(e)},t.Panner.prototype.pan=function(t,e){var n=e||0,o=i.currentTime+n;this.stereoPanner.pan.linearRampToValueAtTime(t,o)},t.Panner.prototype.inputChannels=function(){},t.Panner.prototype.connect=function(t){this.stereoPanner.connect(t)},t.Panner.prototype.disconnect=function(){this.stereoPanner&&this.stereoPanner.disconnect()}):(t.Panner=function(t,e,n){this.input=i.createGain(),t.connect(this.input),this.left=i.createGain(),this.right=i.createGain(),this.left.channelInterpretation="discrete",this.right.channelInterpretation="discrete",n>1?(this.splitter=i.createChannelSplitter(2),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0)):(this.input.connect(this.left),this.input.connect(this.right)),this.output=i.createChannelMerger(2),this.left.connect(this.output,0,1),this.right.connect(this.output,0,0),this.output.connect(e)},t.Panner.prototype.pan=function(t,e){var n=e||0,o=i.currentTime+n,s=(t+1)/2,r=Math.cos(s*Math.PI/2),a=Math.sin(s*Math.PI/2);this.left.gain.linearRampToValueAtTime(a,o),this.right.gain.linearRampToValueAtTime(r,o)},t.Panner.prototype.inputChannels=function(t){1===t?(this.input.disconnect(),this.input.connect(this.left),this.input.connect(this.right)):2===t&&(s("undefined"===this.splitter)&&(this.splitter=i.createChannelSplitter(2)),this.input.disconnect(),this.input.connect(this.splitter),this.splitter.connect(this.left,1),this.splitter.connect(this.right,0))},t.Panner.prototype.connect=function(t){this.output.connect(t)},t.Panner.prototype.disconnect=function(){this.output&&this.output.disconnect()})}(),function(){var e=a,i=o,n=i.audiocontext,c=r.midiToFreq,u=r.convertToWav;t.SoundFile=function(e,n,o,r){if("undefined"!==typeof e){if("string"===typeof e||"string"===typeof e[0]){var a=t.prototype._checkFileFormats(e);this.url=a}else if("object"===s(e)&&!(window.File&&window.FileReader&&window.FileList&&window.Blob))throw"Unable to load file because the File API is not supported";e.file&&(e=e.file),this.file=e}this._onended=function(){},this._looping=!1,this._playing=!1,this._paused=!1,this._pauseTime=0,this._cues=[],this._cueIDCounter=0,this._lastPos=0,this._counterNode=null,this._scopeNode=null,this.bufferSourceNodes=[],this.bufferSourceNode=null,this.buffer=null,this.playbackRate=1,this.input=i.audiocontext.createGain(),this.output=i.audiocontext.createGain(),this.reversed=!1,this.startTime=0,this.endTime=null,this.pauseTime=0,this.mode="sustain",this.startMillis=null,this.panPosition=0,this.panner=new t.Panner(this.output,i.input,2),(this.url||this.file)&&this.load(n,o),i.soundArray.push(this),this._whileLoading="function"===typeof r?r:function(){},this._onAudioProcess=g.bind(this),this._clearOnEnd=_.bind(this)},t.prototype.registerPreloadMethod("loadSound",t.prototype),t.prototype.loadSound=function(e,i,n,o){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&window.alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var s=this,r=new t.SoundFile(e,(function(){"function"===typeof i&&i.apply(s,arguments),"function"===typeof s._decrementPreload&&s._decrementPreload()}),n,o);return r},t.SoundFile.prototype.load=function(t,i){var o=this,s=(new Error).stack;if(void 0!==this.url&&""!==this.url){var r=new XMLHttpRequest;r.addEventListener("progress",(function(t){o._updateProgress(t)}),!1),r.open("GET",this.url,!0),r.responseType="arraybuffer",r.onload=function(){if(200===r.status){if(!o.panner)return;n.decodeAudioData(r.response,(function(e){o.panner&&(o.buffer=e,o.panner.inputChannels(e.numberOfChannels),t&&t(o))}),(function(){if(o.panner){var t=new e("decodeAudioData",s,o.url),n="AudioContext error at decodeAudioData for "+o.url;i?(t.msg=n,i(t)):console.error(n+"\n The error stack trace includes: \n"+t.stack)}}))}else{if(!o.panner)return;var a=new e("loadSound",s,o.url),c="Unable to load "+o.url+". The request status was: "+r.status+" ("+r.statusText+")";i?(a.message=c,i(a)):console.error(c+"\n The error stack trace includes: \n"+a.stack)}},r.onerror=function(){var t=new e("loadSound",s,o.url),n="There was no response from the server at "+o.url+". Check the url and internet connectivity.";i?(t.message=n,i(t)):console.error(n+"\n The error stack trace includes: \n"+t.stack)},r.send()}else if(void 0!==this.file){var a=new FileReader;a.onload=function(){o.panner&&n.decodeAudioData(a.result,(function(e){o.panner&&(o.buffer=e,o.panner.inputChannels(e.numberOfChannels),t&&t(o))}))},a.onerror=function(t){o.panner&&onerror&&onerror(t)},a.readAsArrayBuffer(this.file)}},t.SoundFile.prototype._updateProgress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*.99;this._whileLoading(e,t)}else this._whileLoading("size unknown")},t.SoundFile.prototype.isLoaded=function(){return!!this.buffer},t.SoundFile.prototype.play=function(t,e,n,o,s){if(this.output){var r,a,c=i.audiocontext.currentTime,u=t||0;if(u<0&&(u=0),u+=c,"undefined"!==typeof e&&this.rate(e),"undefined"!==typeof n&&this.setVolume(n),!this.buffer)throw"not ready to play file, buffer has yet to load. Try preload()";if(this._pauseTime=0,"restart"===this.mode&&this.buffer&&this.bufferSourceNode&&(this.bufferSourceNode.stop(u),this._counterNode.stop(u)),"untildone"!==this.mode||!this.isPlaying()){if(this.bufferSourceNode=this._initSourceNode(),delete this._counterNode,this._counterNode=this._initCounterNode(),o){if(!(o>=0&&o<this.buffer.duration))throw"start time out of range";r=o}else r=0;s&&(s=s<=this.buffer.duration-r?s:this.buffer.duration),this._paused?(this.bufferSourceNode.start(u,this.pauseTime,s),this._counterNode.start(u,this.pauseTime,s)):(this.bufferSourceNode.start(u,r,s),this._counterNode.start(u,r,s)),this._playing=!0,this._paused=!1,this.bufferSourceNodes.push(this.bufferSourceNode),this.bufferSourceNode._arrayIndex=this.bufferSourceNodes.length-1,this.bufferSourceNode.addEventListener("ended",this._clearOnEnd),this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping,!0===this._looping&&(a=s||r-1e-15,this.bufferSourceNode.loopStart=r,this.bufferSourceNode.loopEnd=a,this._counterNode.loopStart=r,this._counterNode.loopEnd=a)}}else console.warn("SoundFile.play() called after dispose")},t.SoundFile.prototype.playMode=function(t){var e=t.toLowerCase();if("restart"===e&&this.buffer&&this.bufferSourceNode)for(var n=0;n<this.bufferSourceNodes.length-1;n++){var o=i.audiocontext.currentTime;this.bufferSourceNodes[n].stop(o)}if("restart"!==e&&"sustain"!==e&&"untildone"!==e)throw'Invalid play mode. Must be either "restart" or "sustain"';this.mode=e},t.SoundFile.prototype.pause=function(t){var e=i.audiocontext.currentTime,n=t||0,o=n+e;this.isPlaying()&&this.buffer&&this.bufferSourceNode?(this.pauseTime=this.currentTime(),this.bufferSourceNode.stop(o),this._counterNode.stop(o),this._paused=!0,this._playing=!1,this._pauseTime=this.currentTime()):this._pauseTime=0},t.SoundFile.prototype.loop=function(t,e,i,n,o){this._looping=!0,this.play(t,e,i,n,o)},t.SoundFile.prototype.setLoop=function(t){if(!0===t)this._looping=!0;else{if(!1!==t)throw"Error: setLoop accepts either true or false";this._looping=!1}this.bufferSourceNode&&(this.bufferSourceNode.loop=this._looping,this._counterNode.loop=this._looping)},t.SoundFile.prototype.isLooping=function(){return!!this.bufferSourceNode&&(!0===this._looping&&!0===this.isPlaying())},t.SoundFile.prototype.isPlaying=function(){return this._playing},t.SoundFile.prototype.isPaused=function(){return this._paused},t.SoundFile.prototype.stop=function(t){var e=t||0;if("sustain"===this.mode||"untildone"===this.mode)this.stopAll(e),this._playing=!1,this.pauseTime=0,this._paused=!1;else if(this.buffer&&this.bufferSourceNode){var n=i.audiocontext.currentTime,o=e||0;this.pauseTime=0,this.bufferSourceNode.stop(n+o),this._counterNode.stop(n+o),this._playing=!1,this._paused=!1}},t.SoundFile.prototype.stopAll=function(t){var e=i.audiocontext.currentTime,n=t||0;if(this.buffer&&this.bufferSourceNode){for(var o in this.bufferSourceNodes){var s=this.bufferSourceNodes[o];if(s)try{s.stop(e+n)}catch(r){}}this._counterNode.stop(e+n),this._onended(this)}},t.SoundFile.prototype.setVolume=function(t,e,n){if("number"===typeof t){var o=e||0,s=n||0,r=i.audiocontext.currentTime,a=this.output.gain.value;this.output.gain.cancelScheduledValues(r+s),this.output.gain.linearRampToValueAtTime(a,r+s),this.output.gain.linearRampToValueAtTime(t,r+s+o)}else{if(!t)return this.output.gain;t.connect(this.output.gain)}},t.SoundFile.prototype.amp=t.SoundFile.prototype.setVolume,t.SoundFile.prototype.fade=t.SoundFile.prototype.setVolume,t.SoundFile.prototype.getVolume=function(){return this.output.gain.value},t.SoundFile.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},t.SoundFile.prototype.getPan=function(){return this.panPosition},t.SoundFile.prototype.rate=function(t){var e=!1;if("undefined"===typeof t)return this.playbackRate;if(this.playbackRate=t,0===t?t=1e-13:t<0&&!this.reversed?(t=Math.abs(t),e=!0):t>0&&this.reversed&&(e=!0),this.bufferSourceNode){var n=i.audiocontext.currentTime;this.bufferSourceNode.playbackRate.cancelScheduledValues(n),this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(t),n),this._counterNode.playbackRate.cancelScheduledValues(n),this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(t),n)}return e&&this.reverseBuffer(),this.playbackRate},t.SoundFile.prototype.setPitch=function(t){var e=c(t)/c(60);this.rate(e)},t.SoundFile.prototype.getPlaybackRate=function(){return this.playbackRate},t.SoundFile.prototype.duration=function(){return this.buffer?this.buffer.duration:0},t.SoundFile.prototype.currentTime=function(){return this.reversed?Math.abs(this._lastPos-this.buffer.length)/n.sampleRate:this._lastPos/n.sampleRate},t.SoundFile.prototype.jump=function(t,e){if(t<0||t>this.buffer.duration)throw"jump time out of range";if(e>this.buffer.duration-t)throw"end time out of range";var i=t||0,n=e||void 0;this.isPlaying()&&this.stop(0),this.play(0,this.playbackRate,this.output.gain.value,i,n)},t.SoundFile.prototype.channels=function(){return this.buffer.numberOfChannels},t.SoundFile.prototype.sampleRate=function(){return this.buffer.sampleRate},t.SoundFile.prototype.frames=function(){return this.buffer.length},t.SoundFile.prototype.getPeaks=function(t){if(!this.buffer)throw"Cannot load peaks yet, buffer is not loaded";if(t||(t=5*window.width),this.buffer){for(var e=this.buffer,i=e.length/t,n=~~(i/10)||1,o=e.numberOfChannels,s=new Float32Array(Math.round(t)),r=0;r<o;r++)for(var a=e.getChannelData(r),c=0;c<t;c++){for(var u=~~(c*i),p=~~(u+i),h=0,l=u;l<p;l+=n){var d=a[l];(d>h||-d>h)&&(h=d)}(0===r||Math.abs(h)>s[c])&&(s[c]=h)}return s}},t.SoundFile.prototype.reverseBuffer=function(){if(!this.buffer)throw"SoundFile is not done loading";var t=this._lastPos/n.sampleRate,e=this.getVolume();this.setVolume(0,.001);for(var i=this.buffer.numberOfChannels,o=0;o<i;o++)this.buffer.getChannelData(o).reverse();this.reversed=!this.reversed,t&&this.jump(this.duration()-t),this.setVolume(e,.001)},t.SoundFile.prototype.onended=function(t){return this._onended=t,this},t.SoundFile.prototype.add=function(){},t.SoundFile.prototype.dispose=function(){var t=i.audiocontext.currentTime,e=i.soundArray.indexOf(this);if(i.soundArray.splice(e,1),this.stop(t),this.buffer&&this.bufferSourceNode){for(var n=0;n<this.bufferSourceNodes.length-1;n++)if(null!==this.bufferSourceNodes[n]){this.bufferSourceNodes[n].disconnect();try{this.bufferSourceNodes[n].stop(t)}catch(o){console.warning("no buffer source node to dispose")}this.bufferSourceNodes[n]=null}if(this.isPlaying()){try{this._counterNode.stop(t)}catch(o){console.log(o)}this._counterNode=null}}this.output&&(this.output.disconnect(),this.output=null),this.panner&&(this.panner.disconnect(),this.panner=null)},t.SoundFile.prototype.connect=function(t){t?t.hasOwnProperty("input")?this.panner.connect(t.input):this.panner.connect(t):this.panner.connect(i.input)},t.SoundFile.prototype.disconnect=function(){this.panner&&this.panner.disconnect()},t.SoundFile.prototype.getLevel=function(){console.warn("p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead")},t.SoundFile.prototype.setPath=function(e,i){var n=t.prototype._checkFileFormats(e);this.url=n,this.load(i)},t.SoundFile.prototype.setBuffer=function(t){var e=t.length,i=t[0].length,o=n.createBuffer(e,i,n.sampleRate);t[0]instanceof Float32Array||(t[0]=new Float32Array(t[0]));for(var s=0;s<e;s++){var r=o.getChannelData(s);r.set(t[s])}this.buffer=o,this.panner.inputChannels(e)};var p=function(t){for(var e=t.length,i=n.createBuffer(1,t.length,n.sampleRate),o=i.getChannelData(0),s=0;s<e;s++)o[s]=s;return i};t.SoundFile.prototype._initCounterNode=function(){var e=this,i=n.currentTime,o=n.createBufferSource();return e._scopeNode&&(e._scopeNode.disconnect(),e._scopeNode.removeEventListener("audioprocess",e._onAudioProcess),delete e._scopeNode),e._scopeNode=n.createScriptProcessor(256,1,1),o.buffer=p(e.buffer),o.playbackRate.setValueAtTime(e.playbackRate,i),o.connect(e._scopeNode),e._scopeNode.connect(t.soundOut._silentNode),e._scopeNode.addEventListener("audioprocess",e._onAudioProcess),o},t.SoundFile.prototype._initSourceNode=function(){var t=n.createBufferSource();return t.buffer=this.buffer,t.playbackRate.value=this.playbackRate,t.connect(this.output),t},t.SoundFile.prototype.processPeaks=function(t,e,i,n){var o=this.buffer.length,s=this.buffer.sampleRate,r=this.buffer,a=[],c=e||.9,u=c,p=i||.22,h=n||200,v=new window.OfflineAudioContext(1,o,s),y=v.createBufferSource();y.buffer=r;var g=v.createBiquadFilter();g.type="lowpass",y.connect(g),g.connect(v.destination),y.start(0),v.startRendering(),v.oncomplete=function(e){if(self.panner){var i=e.renderedBuffer,n=i.getChannelData(0);do{a=l(n,u),u-=.005}while(Object.keys(a).length<h&&u>=p);var o=d(a),s=f(o,i.sampleRate),r=s.sort((function(t,e){return e.count-t.count})).splice(0,5);this.tempo=r[0].tempo;var c=5,v=m(a,r[0].tempo,i.sampleRate,c);t(v)}}};var h=function(t,e){this.sampleIndex=e,this.amplitude=t,this.tempos=[],this.intervals=[]};function l(t,e){for(var i={},n=t.length,o=0;o<n;o++){if(t[o]>e){var s=t[o],r=new h(s,o);i[o]=r,o+=6e3}o++}return i}function d(t){for(var e=[],i=Object.keys(t).sort(),n=0;n<i.length;n++)for(var o=0;o<10;o++){var s=t[i[n]],r=t[i[n+o]];if(s&&r){var a=s.sampleIndex,c=r.sampleIndex,u=c-a;u>0&&s.intervals.push(u);var p=e.some((function(t){if(t.interval===u)return t.count++,t}));p||e.push({interval:u,count:1})}}return e}function f(t,e){var i=[];return t.forEach((function(t){try{var n=Math.abs(60/(t.interval/e));n=v(n);var o=i.some((function(e){if(e.tempo===n)return e.count+=t.count}));if(!o){if(isNaN(n))return;i.push({tempo:Math.round(n),count:t.count})}}catch(s){throw s}})),i}function m(t,e,i,n){for(var o=[],s=Object.keys(t).sort(),r=0;r<s.length;r++)for(var a=s[r],c=t[a],u=0;u<c.intervals.length;u++){var p=Math.round(Math.abs(60/(c.intervals[u]/i)));p=v(p),Math.abs(p-e)<n&&o.push(c.sampleIndex/i)}return o=o.filter((function(t,e,i){var n=i[e+1]-t;if(n>.01)return!0})),o}function v(t){if(isFinite(t)&&0!==t){while(t<90)t*=2;while(t>180&&t>90)t/=2;return t}}var y=function(t,e,i,n){this.callback=t,this.time=e,this.id=i,this.val=n};function g(t){var e=t.inputBuffer.getChannelData(0);this._lastPos=e[e.length-1]||0,this._onTimeUpdate(self._lastPos)}function _(t){var e=t.target,i=this;e._playing=!1,e.removeEventListener("ended",i._clearOnEnd),i._onended(i),i.bufferSourceNodes.forEach((function(t,e){!1===t._playing&&i.bufferSourceNodes.splice(e)})),0===i.bufferSourceNodes.length&&(i._playing=!1)}t.SoundFile.prototype.addCue=function(t,e,i){var n=this._cueIDCounter++,o=new y(e,t,n,i);return this._cues.push(o),n},t.SoundFile.prototype.removeCue=function(t){for(var e=this._cues.length,i=0;i<e;i++){var n=this._cues[i];if(n.id===t){this._cues.splice(i,1);break}}this._cues.length},t.SoundFile.prototype.clearCues=function(){this._cues=[]},t.SoundFile.prototype._onTimeUpdate=function(t){for(var e=t/this.buffer.sampleRate,i=this._cues.length,n=0;n<i;n++){var o=this._cues[n],s=o.time,r=o.val;this._prevTime<s&&s<=e&&o.callback(r)}this._prevTime=e},t.SoundFile.prototype.save=function(e){var i=u(this.buffer);t.prototype.saveSound([i],e,"wav")},t.SoundFile.prototype.getBlob=function(){var t=u(this.buffer);return new Blob([t],{type:"audio/wav"})}}(),function(){var e=o;t.Amplitude=function(t){this.bufferSize=2048,this.audiocontext=e.audiocontext,this.processor=this.audiocontext.createScriptProcessor(this.bufferSize,2,1),this.input=this.processor,this.output=this.audiocontext.createGain(),this.smoothing=t||0,this.volume=0,this.average=0,this.stereoVol=[0,0],this.stereoAvg=[0,0],this.stereoVolNorm=[0,0],this.volMax=.001,this.normalize=!1,this.processor.onaudioprocess=this._audioProcess.bind(this),this.processor.connect(this.output),this.output.gain.value=0,this.output.connect(this.audiocontext.destination),e.meter.connect(this.processor),e.soundArray.push(this)},t.Amplitude.prototype.setInput=function(i,n){e.meter.disconnect(),n&&(this.smoothing=n),null==i?(console.log("Amplitude input source is not ready! Connecting to master output instead"),e.meter.connect(this.processor)):i instanceof t.Signal?i.output.connect(this.processor):i?(i.connect(this.processor),this.processor.disconnect(),this.processor.connect(this.output)):e.meter.connect(this.processor)},t.Amplitude.prototype.connect=function(t){t?t.hasOwnProperty("input")?this.output.connect(t.input):this.output.connect(t):this.output.connect(this.panner.connect(e.input))},t.Amplitude.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.Amplitude.prototype._audioProcess=function(t){for(var e=0;e<t.inputBuffer.numberOfChannels;e++){for(var i,n=t.inputBuffer.getChannelData(e),o=n.length,s=0,r=0,a=0;a<o;a++)i=n[a],this.normalize?(s+=Math.max(Math.min(i/this.volMax,1),-1),r+=Math.max(Math.min(i/this.volMax,1),-1)*Math.max(Math.min(i/this.volMax,1),-1)):(s+=i,r+=i*i);var c=s/o,u=Math.sqrt(r/o);this.stereoVol[e]=Math.max(u,this.stereoVol[e]*this.smoothing),this.stereoAvg[e]=Math.max(c,this.stereoVol[e]*this.smoothing),this.volMax=Math.max(this.stereoVol[e],this.volMax)}var p=this,h=this.stereoVol.reduce((function(t,e,i){return p.stereoVolNorm[i-1]=Math.max(Math.min(p.stereoVol[i-1]/p.volMax,1),0),p.stereoVolNorm[i]=Math.max(Math.min(p.stereoVol[i]/p.volMax,1),0),t+e}));this.volume=h/this.stereoVol.length,this.volNorm=Math.max(Math.min(this.volume/this.volMax,1),0)},t.Amplitude.prototype.getLevel=function(t){return"undefined"!==typeof t?this.normalize?this.stereoVolNorm[t]:this.stereoVol[t]:this.normalize?this.volNorm:this.volume},t.Amplitude.prototype.toggleNormalize=function(t){this.normalize="boolean"===typeof t?t:!this.normalize},t.Amplitude.prototype.smooth=function(t){t>=0&&t<1?this.smoothing=t:console.log("Error: smoothing must be between 0 and 1")},t.Amplitude.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),delete this.processor}}(),function(){var e=o;t.FFT=function(t,i){this.input=this.analyser=e.audiocontext.createAnalyser(),Object.defineProperties(this,{bins:{get:function(){return this.analyser.fftSize/2},set:function(t){this.analyser.fftSize=2*t},configurable:!0,enumerable:!0},smoothing:{get:function(){return this.analyser.smoothingTimeConstant},set:function(t){this.analyser.smoothingTimeConstant=t},configurable:!0,enumerable:!0}}),this.smooth(t),this.bins=i||1024,e.fftMeter.connect(this.analyser),this.freqDomain=new Uint8Array(this.analyser.frequencyBinCount),this.timeDomain=new Uint8Array(this.analyser.frequencyBinCount),this.bass=[20,140],this.lowMid=[140,400],this.mid=[400,2600],this.highMid=[2600,5200],this.treble=[5200,14e3],e.soundArray.push(this)},t.FFT.prototype.setInput=function(t){t?(t.output?t.output.connect(this.analyser):t.connect&&t.connect(this.analyser),e.fftMeter.disconnect()):e.fftMeter.connect(this.analyser)},t.FFT.prototype.waveform=function(){for(var e,i,n=0;n<arguments.length;n++)"number"===typeof arguments[n]&&(e=arguments[n],this.analyser.fftSize=2*e),"string"===typeof arguments[n]&&(i=arguments[n]);if(i&&!t.prototype._isSafari())return s(this,this.timeDomain),this.analyser.getFloatTimeDomainData(this.timeDomain),this.timeDomain;r(this,this.timeDomain),this.analyser.getByteTimeDomainData(this.timeDomain);for(var o=new Array,a=0;a<this.timeDomain.length;a++){var c=t.prototype.map(this.timeDomain[a],0,255,-1,1);o.push(c)}return o},t.FFT.prototype.analyze=function(){for(var t,e=0;e<arguments.length;e++)"number"===typeof arguments[e]&&(this.bins=arguments[e],this.analyser.fftSize=2*this.bins),"string"===typeof arguments[e]&&(t=arguments[e]);if(t&&"db"===t.toLowerCase())return i(this),this.analyser.getFloatFrequencyData(this.freqDomain),this.freqDomain;n(this,this.freqDomain),this.analyser.getByteFrequencyData(this.freqDomain);var o=Array.apply([],this.freqDomain);return o.length,this.analyser.fftSize,o.constructor,o},t.FFT.prototype.getEnergy=function(t,i){var n=e.audiocontext.sampleRate/2;if("bass"===t?(t=this.bass[0],i=this.bass[1]):"lowMid"===t?(t=this.lowMid[0],i=this.lowMid[1]):"mid"===t?(t=this.mid[0],i=this.mid[1]):"highMid"===t?(t=this.highMid[0],i=this.highMid[1]):"treble"===t&&(t=this.treble[0],i=this.treble[1]),"number"!==typeof t)throw"invalid input for getEnergy()";if(i){if(t&&i){if(t>i){var o=i;i=t,t=o}for(var s=Math.round(t/n*this.freqDomain.length),r=Math.round(i/n*this.freqDomain.length),a=0,c=0,u=s;u<=r;u++)a+=this.freqDomain[u],c+=1;var p=a/c;return p}throw"invalid input for getEnergy()"}var h=Math.round(t/n*this.freqDomain.length);return this.freqDomain[h]},t.FFT.prototype.getFreq=function(t,e){console.log("getFreq() is deprecated. Please use getEnergy() instead.");var i=this.getEnergy(t,e);return i},t.FFT.prototype.getCentroid=function(){for(var t=e.audiocontext.sampleRate/2,i=0,n=0,o=0;o<this.freqDomain.length;o++)i+=o*this.freqDomain[o],n+=this.freqDomain[o];var s=0;0!==n&&(s=i/n);var r=s*(t/this.freqDomain.length);return r},t.FFT.prototype.smooth=function(t){return"undefined"!==typeof t&&(this.smoothing=t),this.smoothing},t.FFT.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.analyser&&(this.analyser.disconnect(),delete this.analyser)},t.FFT.prototype.linAverages=function(t){t=t||16;for(var e=this.freqDomain,i=e.length,n=Math.floor(i/t),o=new Array(t),s=0,r=0;r<i;r++)o[s]=void 0!==o[s]?(o[s]+e[r])/2:e[r],r%n===n-1&&s++;return o},t.FFT.prototype.logAverages=function(t){for(var i=e.audiocontext.sampleRate/2,n=this.freqDomain,o=n.length,s=new Array(t.length),r=0,a=0;a<o;a++){var c=Math.round(a*i/this.freqDomain.length);c>t[r].hi&&r++,s[r]=void 0!==s[r]?(s[r]+n[a])/2:n[a]}return s},t.FFT.prototype.getOctaveBands=function(t,i){t=t||3,i=i||15.625;var n=[],o={lo:i/Math.pow(2,1/(2*t)),ctr:i,hi:i*Math.pow(2,1/(2*t))};n.push(o);var s=e.audiocontext.sampleRate/2;while(o.hi<s){var r={};r.lo=o.hi,r.ctr=o.ctr*Math.pow(2,1/t),r.hi=r.ctr*Math.pow(2,1/(2*t)),n.push(r),o=r}return n};var i=function(t){t.freqDomain instanceof Float32Array===!1&&(t.freqDomain=new Float32Array(t.analyser.frequencyBinCount))},n=function(t){t.freqDomain instanceof Uint8Array===!1&&(t.freqDomain=new Uint8Array(t.analyser.frequencyBinCount))},s=function(t){t.timeDomain instanceof Float32Array===!1&&(t.timeDomain=new Float32Array(t.analyser.frequencyBinCount))},r=function(t){t.timeDomain instanceof Uint8Array===!1&&(t.timeDomain=new Uint8Array(t.analyser.frequencyBinCount))}}(),function(t){"use strict";t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,n){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,n),this},t.SignalBase}(i),function(t){"use strict";t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;e<i;e++){var n=e/(i-1)*2-1;this._curve[e]=t(n,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}(i),function(t){t.TimeBase=function(e,i){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,i);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!this.isUndef(i)||this.isNumber(e)){i=this.defaultArg(i,this._defaultUnits);var n=this._primaryExpressions[i].method;this._expr=n.bind(this,e)}else this.isString(e)?this.set(e):this.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=0;return t&&"0"!==t&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n+=this._beatsToUnits(parseFloat(i)/4)),n}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){var e=-1,i=[];while(t.length>0){t=t.trim();var n=o(t,this);i.push(n),t=t.substr(n.value.length)}function o(t,e){for(var i=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],n=0;n<i.length;n++){var o=e[i[n]];for(var s in o){var r=o[s],a=r.regexp,c=t.match(a);if(null!==c)return{method:r.method,precedence:r.precedence,regexp:r.regexp,value:c[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}return{next:function(){return i[++e]},peek:function(){return i[e+1]}}},t.TimeBase.prototype._matchGroup=function(t,e,i){var n=!1;if(!this.isUndef(t))for(var o in e){var s=e[o];if(s.regexp.test(t.value)){if(this.isUndef(i))return s;if(s.precedence===i)return s}}return n},t.TimeBase.prototype._parseBinary=function(t,e){var i;this.isUndef(e)&&(e=2),i=e<0?this._parseUnary(t):this._parseBinary(t,e-1);var n=t.peek();while(n&&this._matchGroup(n,this._binaryExpressions,e))n=t.next(),i=n.method.bind(this,i,this._parseBinary(t,e-1)),n=t.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,i;e=t.peek();var n=this._matchGroup(e,this._unaryExpressions);return n?(e=t.next(),i=this._parseUnary(t),n.method.bind(this,i)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(t){var e,i;if(e=t.peek(),this.isUndef(e))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(e,this._primaryExpressions)){e=t.next();var n=e.value.match(e.regexp);return e.method.bind(this,n[1],n[2],n[3])}if(e&&"("===e.value){if(t.next(),i=this._parseBinary(t),e=t.next(),!e||")"!==e.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+e.value)},t.TimeBase.prototype._parseExprString=function(t){this.isString(t)||(t=t.toString());var e=this._tokenize(t),i=this._parseBinary(e);return i},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,i,n){return e instanceof t.TimeBase||(e=new this.constructor(e,n)),this._expr=this._binaryExpressions[i].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}(i),function(t){t.Time=function(e,i){if(!(this instanceof t.Time))return new t.Time(e,i);this._plusNow=!1,t.TimeBase.call(this,e,i)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,i){t=t(),e=e.toSeconds();var n=Math.round(t/e),o=n*e,s=o-t;return t+s*i}.bind(this,this._expr,new this.constructor(t),e),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],i=this._toNotationHelper(t,e),n=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],o=this._toNotationHelper(t,n);return o.split("+").length<i.split("+").length?o:i},t.Time.prototype._toNotationHelper=function(t,e){for(var i=this._notationToUnits(e[e.length-1]),n="",o=0;o<e.length;o++){var s=this._notationToUnits(e[o]),r=t/s,a=1e-6;if(1-r%1<a&&(r+=a),r=Math.floor(r),r>0){if(n+=1===r?e[o]:r.toString()+"*"+e[o],t-=r*s,t<i)break;n+=" + "}}return""===n&&(n="0"),n},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,i=[e.n,e.t,e.m],n=0;n<i.length;n++){var o=i[n],s=t.match(o.regexp);if(s)return o.method.call(this,s[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,i=Math.floor(e/this._timeSignature()),n=e%1*4;e=Math.floor(e)%this._timeSignature(),n=n.toString(),n.length>3&&(n=parseFloat(n).toFixed(3));var o=[i,e,n];return o.join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){var t=this._expr();return t+(this._plusNow?this.now():0)},t.Time}(i),function(t){t.Frequency=function(e,i){if(!(this instanceof t.Frequency))return new t.Frequency(e,i);t.TimeBase.call(this,e,i)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,i){var n=e[t.toLowerCase()],o=n+12*(parseInt(i)+1);return this.midiToFrequency(o)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(n*=this._beatsToUnits(parseFloat(i)/4)),n}},t.Frequency.prototype.transpose=function(t){return this._expr=function(t,e){var i=t();return i*this.intervalToFrequencyRatio(e)}.bind(this,this._expr,t),this},t.Frequency.prototype.harmonize=function(t){return this._expr=function(t,e){for(var i=t(),n=[],o=0;o<e.length;o++)n[o]=i*this.intervalToFrequencyRatio(e[o]);return n}.bind(this,this._expr,t),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),n=Math.log(e/t.Frequency.A4)/Math.LN2,o=Math.round(12*n)+57,s=Math.floor(o/12);s<0&&(o+=-12*s);var r=i[o%12];return r+s.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),i=this.valueOf()/e;return Math.floor(i*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/t.Frequency.A4)/Math.LN2},t.Frequency}(i),function(t){t.TransportTime=function(e,i){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,i);t.Time.call(this,e,i)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var i=this._secondsToTicks(e()),n=Math.ceil(t.Transport.ticks/i);return this._ticksToUnits(n*i)}},t.TransportTime.prototype._secondsToTicks=function(e){var i=this._beatsToUnits(1),n=e/i;return Math.round(n*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){var e=this._secondsToTicks(this._expr());return e+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){var e=this._expr();return e+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}(i),function(t){t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isUndef(e)?this.now():this.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)?new t.TransportTime(e).toTicks():this.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0}}(i),function(t){"use strict";t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,this.isObject(e.lfo)?this.value=e.lfo:this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(this.isObject(e)){if(this.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var i=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=i}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),e<=this.now()+this.blockTime?this._param.value=t:this._param.setValueAtTime(t,e),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var n=0;n<t.length;n++)t[n]=this._fromUnits(t[n]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i,n){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampToValue(e,i,n):this.linearRampToValue(e,i,n),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}(i),function(t){"use strict";window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.prototype.createInsOuts=function(e,i){1===e?this.input=new t.Gain:e>1&&(this.input=new Array(e)),1===i?this.output=new t.Gain:i>1&&(this.output=new Array(e))},t.Gain}(i),c=function(t){"use strict";return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,this.context.getConstant(1).chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal}(i),u=function(t){"use strict";return t.Add=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}(i),p=function(t){"use strict";return t.Multiply=function(e){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}(i),h=function(t){"use strict";return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}(i),function(){var e=c,i=u,n=p,o=h;t.Signal=function(t){var i=new e(t);return i},e.prototype.fade=e.prototype.linearRampToValueAtTime,n.prototype.fade=e.prototype.fade,i.prototype.fade=e.prototype.fade,o.prototype.fade=e.prototype.fade,e.prototype.setInput=function(t){t.connect(this)},n.prototype.setInput=e.prototype.setInput,i.prototype.setInput=e.prototype.setInput,o.prototype.setInput=e.prototype.setInput,e.prototype.add=function(t){var e=new i(t);return this.connect(e),e},n.prototype.add=e.prototype.add,i.prototype.add=e.prototype.add,o.prototype.add=e.prototype.add,e.prototype.mult=function(t){var e=new n(t);return this.connect(e),e},n.prototype.mult=e.prototype.mult,i.prototype.mult=e.prototype.mult,o.prototype.mult=e.prototype.mult,e.prototype.scale=function(e,i,n,s){var r,a;4===arguments.length?(r=t.prototype.map(n,e,i,0,1)-.5,a=t.prototype.map(s,e,i,0,1)-.5):(r=arguments[0],a=arguments[1]);var c=new o(r,a);return this.connect(c),c},n.prototype.scale=e.prototype.scale,i.prototype.scale=e.prototype.scale,o.prototype.scale=e.prototype.scale}(),function(){var e=o,i=u,n=p,s=h;t.Oscillator=function(i,n){if("string"===typeof i){var o=n;n=i,i=o}if("number"===typeof n){o=n;n=i,i=o}this.started=!1,this.phaseAmount=void 0,this.oscillator=e.audiocontext.createOscillator(),this.f=i||440,this.oscillator.type=n||"sine",this.oscillator.frequency.setValueAtTime(this.f,e.audiocontext.currentTime),this.output=e.audiocontext.createGain(),this._freqMods=[],this.output.gain.value=.5,this.output.gain.setValueAtTime(.5,e.audiocontext.currentTime),this.oscillator.connect(this.output),this.panPosition=0,this.connection=e.input,this.panner=new t.Panner(this.output,this.connection,1),this.mathOps=[this.output],e.soundArray.push(this)},t.Oscillator.prototype.start=function(t,i){if(this.started){var n=e.audiocontext.currentTime;this.stop(n)}if(!this.started){var o=i||this.f,s=this.oscillator.type;for(var r in this.oscillator&&(this.oscillator.disconnect(),delete this.oscillator),this.oscillator=e.audiocontext.createOscillator(),this.oscillator.frequency.value=Math.abs(o),this.oscillator.type=s,this.oscillator.connect(this.output),t=t||0,this.oscillator.start(t+e.audiocontext.currentTime),this.freqNode=this.oscillator.frequency,this._freqMods)"undefined"!==typeof this._freqMods[r].connect&&this._freqMods[r].connect(this.oscillator.frequency);this.started=!0}},t.Oscillator.prototype.stop=function(t){if(this.started){var i=t||0,n=e.audiocontext.currentTime;this.oscillator.stop(i+n),this.started=!1}},t.Oscillator.prototype.amp=function(t,i,n){var o=this;if("number"===typeof t){i=i||0,n=n||0;var s=e.audiocontext.currentTime;this.output.gain.linearRampToValueAtTime(t,s+n+i)}else{if(!t)return this.output.gain;t.connect(o.output.gain)}},t.Oscillator.prototype.fade=t.Oscillator.prototype.amp,t.Oscillator.prototype.getAmp=function(){return this.output.gain.value},t.Oscillator.prototype.freq=function(t,i,n){if("number"!==typeof t||isNaN(t)){if(!t)return this.oscillator.frequency;t.output&&(t=t.output),t.connect(this.oscillator.frequency),this._freqMods.push(t)}else{this.f=t;var o=e.audiocontext.currentTime;i=i||0,n=n||0;0===i?this.oscillator.frequency.setValueAtTime(t,n+o):t>0?this.oscillator.frequency.exponentialRampToValueAtTime(t,n+i+o):this.oscillator.frequency.linearRampToValueAtTime(t,n+i+o),this.phaseAmount&&this.phase(this.phaseAmount)}},t.Oscillator.prototype.getFreq=function(){return this.oscillator.frequency.value},t.Oscillator.prototype.setType=function(t){this.oscillator.type=t},t.Oscillator.prototype.getType=function(){return this.oscillator.type},t.Oscillator.prototype.connect=function(t){t?t.hasOwnProperty("input")?(this.panner.connect(t.input),this.connection=t.input):(this.panner.connect(t),this.connection=t):this.panner.connect(e.input)},t.Oscillator.prototype.disconnect=function(){this.output&&this.output.disconnect(),this.panner&&(this.panner.disconnect(),this.output&&this.output.connect(this.panner)),this.oscMods=[]},t.Oscillator.prototype.pan=function(t,e){this.panPosition=t,this.panner.pan(t,e)},t.Oscillator.prototype.getPan=function(){return this.panPosition},t.Oscillator.prototype.dispose=function(){var t=e.soundArray.indexOf(this);if(e.soundArray.splice(t,1),this.oscillator){var i=e.audiocontext.currentTime;this.stop(i),this.disconnect(),this.panner=null,this.oscillator=null}this.osc2&&this.osc2.dispose()},t.Oscillator.prototype.phase=function(i){var n=t.prototype.map(i,0,1,0,1/this.f),o=e.audiocontext.currentTime;this.phaseAmount=i,this.dNode||(this.dNode=e.audiocontext.createDelay(),this.oscillator.disconnect(),this.oscillator.connect(this.dNode),this.dNode.connect(this.output)),this.dNode.delayTime.setValueAtTime(n,o)};var r=function(t,e,i,n,o){var s=t.oscillator;for(var r in t.mathOps)t.mathOps[r]instanceof o&&(s.disconnect(),t.mathOps[r].dispose(),i=r,i<t.mathOps.length-2&&(n=t.mathOps[r+1]));return i===t.mathOps.length-1&&t.mathOps.push(n),r>0&&(s=t.mathOps[r-1]),s.disconnect(),s.connect(e),e.connect(n),t.mathOps[i]=e,t};t.Oscillator.prototype.add=function(t){var e=new i(t),n=this.mathOps.length-1,o=this.output;return r(this,e,n,o,i)},t.Oscillator.prototype.mult=function(t){var e=new n(t),i=this.mathOps.length-1,o=this.output;return r(this,e,i,o,n)},t.Oscillator.prototype.scale=function(e,i,n,o){var a,c;4===arguments.length?(a=t.prototype.map(n,e,i,0,1)-.5,c=t.prototype.map(o,e,i,0,1)-.5):(a=arguments[0],c=arguments[1]);var u=new s(a,c),p=this.mathOps.length-1,h=this.output;return r(this,u,p,h,s)},t.SinOsc=function(e){t.Oscillator.call(this,e,"sine")},t.SinOsc.prototype=Object.create(t.Oscillator.prototype),t.TriOsc=function(e){t.Oscillator.call(this,e,"triangle")},t.TriOsc.prototype=Object.create(t.Oscillator.prototype),t.SawOsc=function(e){t.Oscillator.call(this,e,"sawtooth")},t.SawOsc.prototype=Object.create(t.Oscillator.prototype),t.SqrOsc=function(e){t.Oscillator.call(this,e,"square")},t.SqrOsc.prototype=Object.create(t.Oscillator.prototype)}(),function(t){"use strict";t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(t){if(this.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(t){var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(t){var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var i=this._search(t);return i-1>=0?this._timeline[i-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0;i--){if(this._timeline[i].time!==t)break;e=i}this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){var e=0,i=this._timeline.length,n=i;if(i>0&&this._timeline[i-1].time<=t)return i-1;while(e<n){var o=Math.floor(e+(n-e)/2),s=this._timeline[o],r=this._timeline[o+1];if(s.time===t){for(var a=o;a<this._timeline.length;a++){var c=this._timeline[a];c.time===t&&(o=a)}return o}if(s.time<t&&r.time>t)return o;s.time>t?n=o:s.time<t&&(e=o+1)}return-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var n=e;n<=i;n++)t(this._timeline[n]);if(this._iterating=!1,this._toRemove.length>0){for(var o=0;o<this._toRemove.length;o++){var s=this._timeline.indexOf(this._toRemove[o]);-1!==s&&this._timeline.splice(s,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){var i=this._search(t);while(i>=0&&this._timeline[i].time>=t)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate((function(i){i.time===t&&e(i)}),0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}(i),l=function(t){"use strict";return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this._events=new t.Timeline(10),t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Curve:"curve",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){i=this.toSeconds(i);var n=this._searchBefore(i);n&&0===n.value&&this.setValueAtTime(this._minOutput,n.time),e=this._fromUnits(e);var o=Math.max(e,this._minOutput);return this._events.add({type:t.TimelineSignal.Type.Exponential,value:o,time:i}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,i-this.sampleTime),this.setValueAtTime(0,i)):this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=Math.max(this._minOutput,n),i=this.toSeconds(i),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:n}),this._param.setTargetAtTime(e,i,n),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,i,n,o){o=this.defaultArg(o,1);for(var s=new Array(e.length),r=0;r<s.length;r++)s[r]=this._fromUnits(e[r])*o;i=this.toSeconds(i),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Curve,value:s,time:i,duration:n}),this._param.setValueAtTime(s[0],i);for(var a=1;a<s.length;a++){var c=i+a/(s.length-1)*n;this._param.linearRampToValueAtTime(s[a],c)}return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this._toUnits(this.getValueAtTime(e)),n=this._searchBefore(e);if(n&&n.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(n&&n.type===t.TimelineSignal.Type.Curve&&n.time+n.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(i,e);else{var o=this._searchAfter(e);o&&(this.cancelScheduledValues(e),o.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):o.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e)}return this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var i=this._searchAfter(e),n=this._searchBefore(e),o=this._initial;if(null===n)o=this._initial;else if(n.type===t.TimelineSignal.Type.Target){var s,r=this._events.getBefore(n.time);s=null===r?this._initial:r.value,o=this._exponentialApproach(n.time,s,n.value,n.constant,e)}else o=n.type===t.TimelineSignal.Type.Curve?this._curveInterpolate(n.time,n.value,n.duration,e):null===i?n.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(n.time,n.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(n.time,n.value,i.time,i.value,e):n.value;return o},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,n,o){return i+(e-i)*Math.exp(-(o-t)/n)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,n,o){return e+(o-t)/(i-t)*(n-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,n,o){return e=Math.max(this._minOutput,e),e*Math.pow(n/e,(o-t)/(i-t))},t.TimelineSignal.prototype._curveInterpolate=function(t,e,i,n){var o=e.length;if(n>=t+i)return e[o-1];if(n<=t)return e[0];var s=(n-t)/i,r=Math.floor((o-1)*s),a=Math.ceil((o-1)*s),c=e[r],u=e[a];return a===r?c:this._linearInterpolate(r,c,a,u,s*(o-1))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}(i),function(){var e=o,i=u,n=p,s=h,r=l;t.Envelope=function(t,i,n,o,s,a){this.aTime=t||.1,this.aLevel=i||1,this.dTime=n||.5,this.dLevel=o||0,this.rTime=s||0,this.rLevel=a||0,this._rampHighPercentage=.98,this._rampLowPercentage=.02,this.output=e.audiocontext.createGain(),this.control=new r,this._init(),this.control.connect(this.output),this.connection=null,this.mathOps=[this.control],this.isExponential=!1,this.sourceToClear=null,this.wasTriggered=!1,e.soundArray.push(this)},t.Envelope.prototype._init=function(){var t=e.audiocontext.currentTime,i=t;this.control.setTargetAtTime(1e-5,i,.001),this._setRampAD(this.aTime,this.dTime)},t.Envelope.prototype.set=function(t,e,i,n,o,s){this.aTime=t,this.aLevel=e,this.dTime=i||0,this.dLevel=n||0,this.rTime=o||0,this.rLevel=s||0,this._setRampAD(t,i)},t.Envelope.prototype.setADSR=function(t,e,i,n){this.aTime=t,this.dTime=e||0,this.sPercent=i||0,this.dLevel="undefined"!==typeof i?i*(this.aLevel-this.rLevel)+this.rLevel:0,this.rTime=n||0,this._setRampAD(t,e)},t.Envelope.prototype.setRange=function(t,e){this.aLevel=t||1,this.rLevel=e||0},t.Envelope.prototype._setRampAD=function(t,e){this._rampAttackTime=this.checkExpInput(t),this._rampDecayTime=this.checkExpInput(e);var i=1;i=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=t/this.checkExpInput(i),i=Math.log(1/this._rampLowPercentage),this._rampDecayTC=e/this.checkExpInput(i)},t.Envelope.prototype.setRampPercentages=function(t,e){this._rampHighPercentage=this.checkExpInput(t),this._rampLowPercentage=this.checkExpInput(e);var i=1;i=Math.log(1/this.checkExpInput(1-this._rampHighPercentage)),this._rampAttackTC=this._rampAttackTime/this.checkExpInput(i),i=Math.log(1/this._rampLowPercentage),this._rampDecayTC=this._rampDecayTime/this.checkExpInput(i)},t.Envelope.prototype.setInput=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t])},t.Envelope.prototype.setExp=function(t){this.isExponential=t},t.Envelope.prototype.checkExpInput=function(t){return t<=0&&(t=1e-8),t},t.Envelope.prototype.play=function(t,e,i){var n=e||0;i=i||0;t&&this.connection!==t&&this.connect(t),this.triggerAttack(t,n),this.triggerRelease(t,n+this.aTime+this.dTime+i)},t.Envelope.prototype.triggerAttack=function(t,i){var n=e.audiocontext.currentTime,o=i||0,s=n+o;this.lastAttack=s,this.wasTriggered=!0,t&&this.connection!==t&&this.connect(t);var r=this.control.getValueAtTime(s);!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(r),s):this.control.linearRampToValueAtTime(r,s),s+=this.aTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel),s),r=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(r,s)):(this.control.linearRampToValueAtTime(this.aLevel,s),r=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(r,s)),s+=this.dTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel),s),r=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(r,s)):(this.control.linearRampToValueAtTime(this.dLevel,s),r=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(r,s))},t.Envelope.prototype.triggerRelease=function(t,i){if(this.wasTriggered){var n=e.audiocontext.currentTime,o=i||0,s=n+o;t&&this.connection!==t&&this.connect(t);var r=this.control.getValueAtTime(s);!0===this.isExponential?this.control.exponentialRampToValueAtTime(this.checkExpInput(r),s):this.control.linearRampToValueAtTime(r,s),s+=this.rTime,!0===this.isExponential?(this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel),s),r=this.checkExpInput(this.control.getValueAtTime(s)),this.control.cancelScheduledValues(s),this.control.exponentialRampToValueAtTime(r,s)):(this.control.linearRampToValueAtTime(this.rLevel,s),r=this.control.getValueAtTime(s),this.control.cancelScheduledValues(s),this.control.linearRampToValueAtTime(r,s)),this.wasTriggered=!1}},t.Envelope.prototype.ramp=function(t,i,n,o){var s=e.audiocontext.currentTime,r=i||0,a=s+r,c=this.checkExpInput(n),u="undefined"!==typeof o?this.checkExpInput(o):void 0;t&&this.connection!==t&&this.connect(t);var p=this.checkExpInput(this.control.getValueAtTime(a));c>p?(this.control.setTargetAtTime(c,a,this._rampAttackTC),a+=this._rampAttackTime):c<p&&(this.control.setTargetAtTime(c,a,this._rampDecayTC),a+=this._rampDecayTime),void 0!==u&&(u>c?this.control.setTargetAtTime(u,a,this._rampAttackTC):u<c&&this.control.setTargetAtTime(u,a,this._rampDecayTC))},t.Envelope.prototype.connect=function(i){this.connection=i,(i instanceof t.Oscillator||i instanceof t.SoundFile||i instanceof t.AudioIn||i instanceof t.Reverb||i instanceof t.Noise||i instanceof t.Filter||i instanceof t.Delay)&&(i=i.output.gain),i instanceof AudioParam&&i.setValueAtTime(0,e.audiocontext.currentTime),i instanceof t.Signal&&i.setValue(0),this.output.connect(i)},t.Envelope.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.Envelope.prototype.add=function(e){var n=new i(e),o=this.mathOps.length,s=this.output;return t.prototype._mathChain(this,n,o,s,i)},t.Envelope.prototype.mult=function(e){var i=new n(e),o=this.mathOps.length,s=this.output;return t.prototype._mathChain(this,i,o,s,n)},t.Envelope.prototype.scale=function(e,i,n,o){var r=new s(e,i,n,o),a=this.mathOps.length,c=this.output;return t.prototype._mathChain(this,r,a,c,s)},t.Envelope.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.disconnect(),this.control&&(this.control.dispose(),this.control=null);for(var i=1;i<this.mathOps.length;i++)this.mathOps[i].dispose()},t.Env=function(e,i,n,o,s,r){console.warn("WARNING: p5.Env is now deprecated and may be removed in future versions. Please use the new p5.Envelope instead."),t.Envelope.call(this,e,i,n,o,s,r)},t.Env.prototype=Object.create(t.Envelope.prototype)}(),function(){var e=o;function i(){for(var t=e.audiocontext,i=t.createBuffer(1,2048,t.sampleRate),n=i.getChannelData(0),o=0;o<2048;o++)n[o]=1;var s=t.createBufferSource();return s.buffer=i,s.loop=!0,s}t.Pulse=function(n,o){t.Oscillator.call(this,n,"sawtooth"),this.w=o||0,this.osc2=new t.SawOsc(n),this.dNode=e.audiocontext.createDelay(),this.dcOffset=i(),this.dcGain=e.audiocontext.createGain(),this.dcOffset.connect(this.dcGain),this.dcGain.connect(this.output),this.f=n||440;var s=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=s,this.dcGain.gain.value=1.7*(.5-this.w),this.osc2.disconnect(),this.osc2.panner.disconnect(),this.osc2.amp(-1),this.osc2.output.connect(this.dNode),this.dNode.connect(this.output),this.output.gain.value=1,this.output.connect(this.panner)},t.Pulse.prototype=Object.create(t.Oscillator.prototype),t.Pulse.prototype.width=function(e){if("number"===typeof e){if(e<=1&&e>=0){this.w=e;var i=this.w/this.oscillator.frequency.value;this.dNode.delayTime.value=i}this.dcGain.gain.value=1.7*(.5-this.w)}else{e.connect(this.dNode.delayTime);var n=new t.SignalAdd(-.5);n.setInput(e),n=n.mult(-1),n=n.mult(1.7),n.connect(this.dcGain.gain)}},t.Pulse.prototype.start=function(t,n){var o=e.audiocontext.currentTime,s=n||0;if(!this.started){var r=t||this.f,a=this.oscillator.type;this.oscillator=e.audiocontext.createOscillator(),this.oscillator.frequency.setValueAtTime(r,o),this.oscillator.type=a,this.oscillator.connect(this.output),this.oscillator.start(s+o),this.osc2.oscillator=e.audiocontext.createOscillator(),this.osc2.oscillator.frequency.setValueAtTime(r,s+o),this.osc2.oscillator.type=a,this.osc2.oscillator.connect(this.osc2.output),this.osc2.start(s+o),this.freqNode=[this.oscillator.frequency,this.osc2.oscillator.frequency],this.dcOffset=i(),this.dcOffset.connect(this.dcGain),this.dcOffset.start(s+o),void 0!==this.mods&&void 0!==this.mods.frequency&&(this.mods.frequency.connect(this.freqNode[0]),this.mods.frequency.connect(this.freqNode[1])),this.started=!0,this.osc2.started=!0}},t.Pulse.prototype.stop=function(t){if(this.started){var i=t||0,n=e.audiocontext.currentTime;this.oscillator.stop(i+n),this.osc2.oscillator&&this.osc2.oscillator.stop(i+n),this.dcOffset.stop(i+n),this.started=!1,this.osc2.started=!1}},t.Pulse.prototype.freq=function(t,i,n){if("number"===typeof t){this.f=t;var o=e.audiocontext.currentTime,s=(i=i||0,n=n||0,this.oscillator.frequency.value);this.oscillator.frequency.cancelScheduledValues(o),this.oscillator.frequency.setValueAtTime(s,o+n),this.oscillator.frequency.exponentialRampToValueAtTime(t,n+i+o),this.osc2.oscillator.frequency.cancelScheduledValues(o),this.osc2.oscillator.frequency.setValueAtTime(s,o+n),this.osc2.oscillator.frequency.exponentialRampToValueAtTime(t,n+i+o),this.freqMod&&(this.freqMod.output.disconnect(),this.freqMod=null)}else t.output&&(t.output.disconnect(),t.output.connect(this.oscillator.frequency),t.output.connect(this.osc2.oscillator.frequency),this.freqMod=t)}}(),function(){var e=o;t.Noise=function(e){var o;t.Oscillator.call(this),delete this.f,delete this.freq,delete this.oscillator,o="brown"===e?s:"pink"===e?n:i,this.buffer=o},t.Noise.prototype=Object.create(t.Oscillator.prototype);var i=function(){for(var t=2*e.audiocontext.sampleRate,i=e.audiocontext.createBuffer(1,t,e.audiocontext.sampleRate),n=i.getChannelData(0),o=0;o<t;o++)n[o]=2*Math.random()-1;return i.type="white",i}(),n=function(){var t,i,n,o,s,r,a,c=2*e.audiocontext.sampleRate,u=e.audiocontext.createBuffer(1,c,e.audiocontext.sampleRate),p=u.getChannelData(0);t=i=n=o=s=r=a=0;for(var h=0;h<c;h++){var l=2*Math.random()-1;t=.99886*t+.0555179*l,i=.99332*i+.0750759*l,n=.969*n+.153852*l,o=.8665*o+.3104856*l,s=.55*s+.5329522*l,r=-.7616*r-.016898*l,p[h]=t+i+n+o+s+r+a+.5362*l,p[h]*=.11,a=.115926*l}return u.type="pink",u}(),s=function(){for(var t=2*e.audiocontext.sampleRate,i=e.audiocontext.createBuffer(1,t,e.audiocontext.sampleRate),n=i.getChannelData(0),o=0,s=0;s<t;s++){var r=2*Math.random()-1;n[s]=(o+.02*r)/1.02,o=n[s],n[s]*=3.5}return i.type="brown",i}();t.Noise.prototype.setType=function(t){switch(t){case"white":this.buffer=i;break;case"pink":this.buffer=n;break;case"brown":this.buffer=s;break;default:this.buffer=i}if(this.started){var o=e.audiocontext.currentTime;this.stop(o),this.start(o+.01)}},t.Noise.prototype.getType=function(){return this.buffer.type},t.Noise.prototype.start=function(){this.started&&this.stop(),this.noise=e.audiocontext.createBufferSource(),this.noise.buffer=this.buffer,this.noise.loop=!0,this.noise.connect(this.output);var t=e.audiocontext.currentTime;this.noise.start(t),this.started=!0},t.Noise.prototype.stop=function(){var t=e.audiocontext.currentTime;this.noise&&(this.noise.stop(t),this.started=!1)},t.Noise.prototype.dispose=function(){var t=e.audiocontext.currentTime,i=e.soundArray.indexOf(this);e.soundArray.splice(i,1),this.noise&&(this.noise.disconnect(),this.stop(t)),this.output&&this.output.disconnect(),this.panner&&this.panner.disconnect(),this.output=null,this.panner=null,this.buffer=null,this.noise=null}}(),function(){var e=o;e.inputSources=[],t.AudioIn=function(i){this.input=e.audiocontext.createGain(),this.output=e.audiocontext.createGain(),this.stream=null,this.mediaStream=null,this.currentSource=null,this.enabled=!1,this.amplitude=new t.Amplitude,this.output.connect(this.amplitude.input),window.MediaStreamTrack&&window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia||(i?i():window.alert("This browser does not support MediaStreamTrack and mediaDevices")),e.soundArray.push(this)},t.AudioIn.prototype.start=function(t,i){var n=this;this.stream&&this.stop();var o=e.inputSources[n.currentSource],s={audio:{sampleRate:e.audiocontext.sampleRate,echoCancellation:!1}};e.inputSources[this.currentSource]&&(s.audio.deviceId=o.deviceId),window.navigator.mediaDevices.getUserMedia(s).then((function(i){n.stream=i,n.enabled=!0,n.mediaStream=e.audiocontext.createMediaStreamSource(i),n.mediaStream.connect(n.output),n.amplitude.setInput(n.output),t&&t()})).catch((function(t){i?i(t):console.error(t)}))},t.AudioIn.prototype.stop=function(){this.stream&&(this.stream.getTracks().forEach((function(t){t.stop()})),this.mediaStream.disconnect(),delete this.mediaStream,delete this.stream)},t.AudioIn.prototype.connect=function(t){t?t.hasOwnProperty("input")?this.output.connect(t.input):t.hasOwnProperty("analyser")?this.output.connect(t.analyser):this.output.connect(t):this.output.connect(e.input)},t.AudioIn.prototype.disconnect=function(){this.output&&(this.output.disconnect(),this.output.connect(this.amplitude.input))},t.AudioIn.prototype.getLevel=function(t){return t&&(this.amplitude.smoothing=t),this.amplitude.getLevel()},t.AudioIn.prototype.amp=function(t,i){if(i){var n=i||0,o=this.output.gain.value;this.output.gain.cancelScheduledValues(e.audiocontext.currentTime),this.output.gain.setValueAtTime(o,e.audiocontext.currentTime),this.output.gain.linearRampToValueAtTime(t,n+e.audiocontext.currentTime)}else this.output.gain.cancelScheduledValues(e.audiocontext.currentTime),this.output.gain.setValueAtTime(t,e.audiocontext.currentTime)},t.AudioIn.prototype.getSources=function(t,i){return new Promise((function(n,o){window.navigator.mediaDevices.enumerateDevices().then((function(i){e.inputSources=i.filter((function(t){return"audioinput"===t.kind})),n(e.inputSources),t&&t(e.inputSources)})).catch((function(t){o(t),i?i(t):console.error("This browser does not support MediaStreamTrack.getSources()")}))}))},t.AudioIn.prototype.setSource=function(t){e.inputSources.length>0&&t<e.inputSources.length?(this.currentSource=t,console.log("set source to ",e.inputSources[this.currentSource])):console.log("unable to set input source"),this.stream&&this.stream.active&&this.start()},t.AudioIn.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.stop(),this.output&&this.output.disconnect(),this.amplitude&&this.amplitude.disconnect(),delete this.amplitude,delete this.output}}(),function(t){"use strict";t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}(i),function(t){"use strict";t.Subtract=function(e){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}(i),function(t){"use strict";t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper((function(t){return t<=0?0:1}),127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}(i),function(t){"use strict";t.GreaterThan=function(e){this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}(i),function(t){"use strict";t.Abs=function(){this._abs=this.input=this.output=new t.WaveShaper((function(t){return 0===t?0:Math.abs(t)}),127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}(i),function(t){"use strict";t.Modulo=function(e){this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap((function(e){var i=Math.floor((e+1e-4)/t);return i}))},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}(i),function(t){"use strict";t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}(i),function(t){"use strict";t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper((function(t){return(t+1)/2}))},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}(i),function(t){"use strict";function e(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),i._eval(e[1]).connect(n,0,1),n}function i(t,e,i){var n=new t;return i._eval(e[0]).connect(n,0,0),n}function n(t){return t?parseFloat(t):void 0}function o(t){return t&&t.args?parseFloat(t.args):void 0}t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var i=0;i<e;i++)this.input[i]=this.context.createGain();var n,o=this._parseTree(t);try{n=this._eval(o)}catch(s){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+t)}this.output=n},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){var i=new t.Signal(n(e));return i}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[n(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,i){var n=o(e[1]),s=new t.Modulo(n);return i._eval(e[0]).connect(s),s}},pow:{regexp:/^pow/,method:function(e,i){var n=o(e[1]),s=new t.Pow(n);return i._eval(e[0]).connect(s),s}},a2g:{regexp:/^a2g/,method:function(e,i){var n=new t.AudioToGain;return i._eval(e[0]).connect(n),n}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(n,o){return 1===n.length?i(t.Negate,n,o):e(t.Subtract,n,o)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:i.bind(this,t.Negate)},"!":{regexp:/^\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),i=0;if(null!==e)for(var n=0;n<e.length;n++){var o=parseInt(e[n].substr(1))+1;i=Math.max(i,o)}return i},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),i=0;i<t.length;i++)e=e.replace(/\%/i,t[i]);return e},t.Expr.prototype._tokenize=function(e){var i=-1,n=[];while(e.length>0){e=e.trim();var o=s(e);n.push(o),e=e.substr(o.value.length)}function s(e){for(var i in t.Expr._Expressions){var n=t.Expr._Expressions[i];for(var o in n){var s=n[o],r=s.regexp,a=e.match(r);if(null!==a)return{type:i,value:a[0],method:s.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}return{next:function(){return n[++i]},peek:function(){return n[i+1]}}},t.Expr.prototype._parseTree=function(e){var i=this._tokenize(e),n=this.isUndef.bind(this);function o(t,e){return!n(t)&&"glue"===t.type&&t.value===e}function s(e,i,o){var s=!1,r=t.Expr._Expressions[i];if(!n(e))for(var a in r){var c=r[a];if(c.regexp.test(e.value)){if(n(o))return!0;if(c.precedence===o)return!0}}return s}function r(t){var e;n(t)&&(t=5),e=t<0?a():r(t-1);var o=i.peek();while(s(o,"binary",t))o=i.next(),e={operator:o.value,method:o.method,args:[e,r(t-1)]},o=i.peek();return e}function a(){var t,e;return t=i.peek(),s(t,"unary")?(t=i.next(),e=a(),{operator:t.value,method:t.method,args:[e]}):c()}function c(){var t,e;if(t=i.peek(),n(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=i.next(),u(t);if("value"===t.type)return t=i.next(),{method:t.method,args:t.value};if(o(t,"(")){if(i.next(),e=r(),t=i.next(),!o(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}function u(t){var e,n=[];if(e=i.next(),!o(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');if(e=i.peek(),o(e,")")||(n=p()),e=i.next(),!o(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:n,name:name}}function p(){var t,e,s=[];while(1){if(e=r(),n(e))break;if(s.push(e),t=i.peek(),!o(t,","))break;i.next()}return s}return r()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}(i),function(t){"use strict";t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}(i),d=function(t){"use strict";return t.CrossFade=function(e){this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}(i),f=function(){var e=o,i=d;return t.Effect=function(){this.ac=e.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this._drywet=new i(1),this.wet=this.ac.createGain(),this.input.connect(this._drywet.a),this.wet.connect(this._drywet.b),this._drywet.connect(this.output),this.connect(),e.soundArray.push(this)},t.Effect.prototype.amp=function(t,i,n){i=i||0,n=n||0;var o=e.audiocontext.currentTime,s=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(s,o+n+.001),this.output.gain.linearRampToValueAtTime(t,o+n+i+.001)},t.Effect.prototype.chain=function(){if(arguments.length>0){this.connect(arguments[0]);for(var t=1;t<arguments.length;t+=1)arguments[t-1].connect(arguments[t])}return this},t.Effect.prototype.drywet=function(t){return"undefined"!==typeof t&&(this._drywet.fade.value=t),this._drywet.fade.value},t.Effect.prototype.connect=function(e){var i=e||t.soundOut.input;this.output.connect(i.input?i.input:i)},t.Effect.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.Effect.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.input&&(this.input.disconnect(),delete this.input),this.output&&(this.output.disconnect(),delete this.output),this._drywet&&(this._drywet.disconnect(),delete this._drywet),this.wet&&(this.wet.disconnect(),delete this.wet),this.ac=void 0},t.Effect}(),m=function(){var e=f;return t.Filter=function(t){e.call(this),this.biquad=this.ac.createBiquadFilter(),this.input.connect(this.biquad),this.biquad.connect(this.wet),t&&this.setType(t),this._on=!0,this._untoggledType=this.biquad.type},t.Filter.prototype=Object.create(e.prototype),t.Filter.prototype.process=function(t,e,i,n){t.connect(this.input),this.set(e,i,n)},t.Filter.prototype.set=function(t,e,i){t&&this.freq(t,i),e&&this.res(e,i)},t.Filter.prototype.freq=function(t,e){var i=e||0;return t<=0&&(t=1),"number"===typeof t?(this.biquad.frequency.cancelScheduledValues(this.ac.currentTime+.01+i),this.biquad.frequency.exponentialRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.biquad.frequency),this.biquad.frequency.value},t.Filter.prototype.res=function(t,e){var i=e||0;return"number"===typeof t?(this.biquad.Q.value=t,this.biquad.Q.cancelScheduledValues(this.ac.currentTime+.01+i),this.biquad.Q.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.biquad.Q),this.biquad.Q.value},t.Filter.prototype.gain=function(t,e){var i=e||0;return"number"===typeof t?(this.biquad.gain.value=t,this.biquad.gain.cancelScheduledValues(this.ac.currentTime+.01+i),this.biquad.gain.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.biquad.gain),this.biquad.gain.value},t.Filter.prototype.toggle=function(){return this._on=!this._on,!0===this._on?this.biquad.type=this._untoggledType:!1===this._on&&(this.biquad.type="allpass"),this._on},t.Filter.prototype.setType=function(t){this.biquad.type=t,this._untoggledType=this.biquad.type},t.Filter.prototype.dispose=function(){e.prototype.dispose.apply(this),this.biquad&&(this.biquad.disconnect(),delete this.biquad)},t.LowPass=function(){t.Filter.call(this,"lowpass")},t.LowPass.prototype=Object.create(t.Filter.prototype),t.HighPass=function(){t.Filter.call(this,"highpass")},t.HighPass.prototype=Object.create(t.Filter.prototype),t.BandPass=function(){t.Filter.call(this,"bandpass")},t.BandPass.prototype=Object.create(t.Filter.prototype),t.Filter}(),v=function(){var e=m,i=o,n=function(t,i){e.call(this,"peaking"),this.disconnect(),this.set(t,i),this.biquad.gain.value=0,delete this.input,delete this.output,delete this._drywet,delete this.wet};return n.prototype=Object.create(e.prototype),n.prototype.amp=function(){console.warn("`amp()` is not available for p5.EQ bands. Use `.gain()`")},n.prototype.drywet=function(){console.warn("`drywet()` is not available for p5.EQ bands.")},n.prototype.connect=function(e){var i=e||t.soundOut.input;this.biquad?this.biquad.connect(i.input?i.input:i):this.output.connect(i.input?i.input:i)},n.prototype.disconnect=function(){this.biquad&&this.biquad.disconnect()},n.prototype.dispose=function(){var t=i.soundArray.indexOf(this);i.soundArray.splice(t,1),this.disconnect(),delete this.biquad},n}(),function(){var e=f,i=v;t.EQ=function(t){var i,n,o;e.call(this),t=3===t||8===t?t:3,i=3===t?Math.pow(2,3):2,this.bands=[];for(var s=0;s<t;s++)s===t-1?(n=21e3,o=.01):0===s?(n=100,o=.1):1===s?(n=3===t?360*i:360,o=1):(n=this.bands[s-1].freq()*i,o=1),this.bands[s]=this._newBand(n,o),s>0?this.bands[s-1].connect(this.bands[s].biquad):this.input.connect(this.bands[s].biquad);this.bands[t-1].connect(this.output)},t.EQ.prototype=Object.create(e.prototype),t.EQ.prototype.process=function(t){t.connect(this.input)},t.EQ.prototype.set=function(){if(arguments.length===2*this.bands.length)for(var t=0;t<arguments.length;t+=2)this.bands[t/2].freq(arguments[t]),this.bands[t/2].gain(arguments[t+1]);else console.error("Argument mismatch. .set() should be called with "+2*this.bands.length+" arguments. (one frequency and gain value pair for each band of the eq)")},t.EQ.prototype._newBand=function(t,e){return new i(t,e)},t.EQ.prototype.dispose=function(){if(e.prototype.dispose.apply(this),this.bands){while(this.bands.length>0)this.bands.pop().dispose();delete this.bands}},t.EQ}(),function(){var e=f;t.Panner3D=function(){e.call(this),this.panner=this.ac.createPanner(),this.panner.panningModel="HRTF",this.panner.distanceModel="linear",this.panner.connect(this.output),this.input.connect(this.panner)},t.Panner3D.prototype=Object.create(e.prototype),t.Panner3D.prototype.process=function(t){t.connect(this.input)},t.Panner3D.prototype.set=function(t,e,i,n){return this.positionX(t,n),this.positionY(e,n),this.positionZ(i,n),[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]},t.Panner3D.prototype.positionX=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.positionX.value=t,this.panner.positionX.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.positionX.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.positionX),this.panner.positionX.value},t.Panner3D.prototype.positionY=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.positionY.value=t,this.panner.positionY.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.positionY.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.positionY),this.panner.positionY.value},t.Panner3D.prototype.positionZ=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.positionZ.value=t,this.panner.positionZ.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.positionZ.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.positionZ),this.panner.positionZ.value},t.Panner3D.prototype.orient=function(t,e,i,n){return this.orientX(t,n),this.orientY(e,n),this.orientZ(i,n),[this.panner.orientationX.value,this.panner.orientationY.value,this.panner.orientationZ.value]},t.Panner3D.prototype.orientX=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.orientationX.value=t,this.panner.orientationX.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.orientationX.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.orientationX),this.panner.orientationX.value},t.Panner3D.prototype.orientY=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.orientationY.value=t,this.panner.orientationY.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.orientationY.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.orientationY),this.panner.orientationY.value},t.Panner3D.prototype.orientZ=function(t,e){var i=e||0;return"number"===typeof t?(this.panner.orientationZ.value=t,this.panner.orientationZ.cancelScheduledValues(this.ac.currentTime+.01+i),this.panner.orientationZ.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.panner.orientationZ),this.panner.orientationZ.value},t.Panner3D.prototype.setFalloff=function(t,e){this.maxDist(t),this.rolloff(e)},t.Panner3D.prototype.maxDist=function(t){return"number"===typeof t&&(this.panner.maxDistance=t),this.panner.maxDistance},t.Panner3D.prototype.rolloff=function(t){return"number"===typeof t&&(this.panner.rolloffFactor=t),this.panner.rolloffFactor},t.Panner3D.dispose=function(){e.prototype.dispose.apply(this),this.panner&&(this.panner.disconnect(),delete this.panner)},t.Panner3D}(),function(){var e=o;t.Listener3D=function(t){this.ac=e.audiocontext,this.listener=this.ac.listener},t.Listener3D.prototype.process=function(t){t.connect(this.input)},t.Listener3D.prototype.position=function(t,e,i,n){return this.positionX(t,n),this.positionY(e,n),this.positionZ(i,n),[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]},t.Listener3D.prototype.positionX=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.positionX.value=t,this.listener.positionX.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.positionX.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.positionX),this.listener.positionX.value},t.Listener3D.prototype.positionY=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.positionY.value=t,this.listener.positionY.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.positionY.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.positionY),this.listener.positionY.value},t.Listener3D.prototype.positionZ=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.positionZ.value=t,this.listener.positionZ.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.positionZ.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.positionZ),this.listener.positionZ.value},t.Listener3D.prototype.orient=function(t,e,i,n,o,s,r){return 3===arguments.length||4===arguments.length?(r=arguments[3],this.orientForward(t,e,i,r)):6!==arguments.length&&7!==arguments||(this.orientForward(t,e,i),this.orientUp(n,o,s,r)),[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value,this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]},t.Listener3D.prototype.orientForward=function(t,e,i,n){return this.forwardX(t,n),this.forwardY(e,n),this.forwardZ(i,n),[this.listener.forwardX,this.listener.forwardY,this.listener.forwardZ]},t.Listener3D.prototype.orientUp=function(t,e,i,n){return this.upX(t,n),this.upY(e,n),this.upZ(i,n),[this.listener.upX,this.listener.upY,this.listener.upZ]},t.Listener3D.prototype.forwardX=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.forwardX.value=t,this.listener.forwardX.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.forwardX.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.forwardX),this.listener.forwardX.value},t.Listener3D.prototype.forwardY=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.forwardY.value=t,this.listener.forwardY.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.forwardY.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.forwardY),this.listener.forwardY.value},t.Listener3D.prototype.forwardZ=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.forwardZ.value=t,this.listener.forwardZ.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.forwardZ.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.forwardZ),this.listener.forwardZ.value},t.Listener3D.prototype.upX=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.upX.value=t,this.listener.upX.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.upX.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.upX),this.listener.upX.value},t.Listener3D.prototype.upY=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.upY.value=t,this.listener.upY.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.upY.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.upY),this.listener.upY.value},t.Listener3D.prototype.upZ=function(t,e){var i=e||0;return"number"===typeof t?(this.listener.upZ.value=t,this.listener.upZ.cancelScheduledValues(this.ac.currentTime+.01+i),this.listener.upZ.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):t&&t.connect(this.listener.upZ),this.listener.upZ.value},t.Listener3D}(),function(){var e=m,i=f;t.Delay=function(){i.call(this),this._split=this.ac.createChannelSplitter(2),this._merge=this.ac.createChannelMerger(2),this._leftGain=this.ac.createGain(),this._rightGain=this.ac.createGain(),this.leftDelay=this.ac.createDelay(),this.rightDelay=this.ac.createDelay(),this._leftFilter=new e,this._rightFilter=new e,this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._leftFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._rightFilter.biquad.frequency.setValueAtTime(1200,this.ac.currentTime),this._leftFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this._rightFilter.biquad.Q.setValueAtTime(.3,this.ac.currentTime),this.input.connect(this._split),this.leftDelay.connect(this._leftGain),this.rightDelay.connect(this._rightGain),this._leftGain.connect(this._leftFilter.input),this._rightGain.connect(this._rightFilter.input),this._merge.connect(this.wet),this._leftFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this._rightFilter.biquad.gain.setValueAtTime(1,this.ac.currentTime),this.setType(0),this._maxDelay=this.leftDelay.delayTime.maxValue,this.feedback(.5)},t.Delay.prototype=Object.create(i.prototype),t.Delay.prototype.process=function(t,e,i,n){var o=i||0,s=e||0;if(o>=1)throw new Error("Feedback value will force a positive feedback loop.");if(s>=this._maxDelay)throw new Error("Delay Time exceeds maximum delay time of "+this._maxDelay+" second.");t.connect(this.input),this.leftDelay.delayTime.setValueAtTime(s,this.ac.currentTime),this.rightDelay.delayTime.setValueAtTime(s,this.ac.currentTime),this._leftGain.gain.value=o,this._rightGain.gain.value=o,n&&(this._leftFilter.freq(n),this._rightFilter.freq(n))},t.Delay.prototype.delayTime=function(t){"number"!==typeof t?(t.connect(this.leftDelay.delayTime),t.connect(this.rightDelay.delayTime)):(this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime),this.leftDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime),this.rightDelay.delayTime.linearRampToValueAtTime(t,this.ac.currentTime))},t.Delay.prototype.feedback=function(t){if(t&&"number"!==typeof t)t.connect(this._leftGain.gain),t.connect(this._rightGain.gain);else{if(t>=1)throw new Error("Feedback value will force a positive feedback loop.");"number"===typeof t&&(this._leftGain.gain.value=t,this._rightGain.gain.value=t)}return this._leftGain.gain.value},t.Delay.prototype.filter=function(t,e){this._leftFilter.set(t,e),this._rightFilter.set(t,e)},t.Delay.prototype.setType=function(t){switch(1===t&&(t="pingPong"),this._split.disconnect(),this._leftFilter.disconnect(),this._rightFilter.disconnect(),this._split.connect(this.leftDelay,0),this._split.connect(this.rightDelay,1),t){case"pingPong":this._rightFilter.setType(this._leftFilter.biquad.type),this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.rightDelay),this._rightFilter.output.connect(this.leftDelay);break;default:this._leftFilter.output.connect(this._merge,0,0),this._rightFilter.output.connect(this._merge,0,1),this._leftFilter.output.connect(this.leftDelay),this._rightFilter.output.connect(this.rightDelay)}},t.Delay.prototype.dispose=function(){i.prototype.dispose.apply(this),this._split.disconnect(),this._leftFilter.dispose(),this._rightFilter.dispose(),this._merge.disconnect(),this._leftGain.disconnect(),this._rightGain.disconnect(),this.leftDelay.disconnect(),this.rightDelay.disconnect(),this._split=void 0,this._leftFilter=void 0,this._rightFilter=void 0,this._merge=void 0,this._leftGain=void 0,this._rightGain=void 0,this.leftDelay=void 0,this.rightDelay=void 0}}(),function(){var e=a,i=f;t.Reverb=function(){i.call(this),this._initConvolverNode(),this.input.gain.value=.5,this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse()},t.Reverb.prototype=Object.create(i.prototype),t.Reverb.prototype._initConvolverNode=function(){this.convolverNode=this.ac.createConvolver(),this.input.connect(this.convolverNode),this.convolverNode.connect(this.wet)},t.Reverb.prototype._teardownConvolverNode=function(){this.convolverNode&&(this.convolverNode.disconnect(),delete this.convolverNode)},t.Reverb.prototype._setBuffer=function(t){this._teardownConvolverNode(),this._initConvolverNode(),this.convolverNode.buffer=t},t.Reverb.prototype.process=function(t,e,i,n){t.connect(this.input);var o=!1;e&&(this._seconds=e,o=!0),i&&(this._decay=i),n&&(this._reverse=n),o&&this._buildImpulse()},t.Reverb.prototype.set=function(t,e,i){var n=!1;t&&(this._seconds=t,n=!0),e&&(this._decay=e),i&&(this._reverse=i),n&&this._buildImpulse()},t.Reverb.prototype._buildImpulse=function(){var t,e,i=this.ac.sampleRate,n=i*this._seconds,o=this._decay,s=this.ac.createBuffer(2,n,i),r=s.getChannelData(0),a=s.getChannelData(1);for(e=0;e<n;e++)t=this._reverse?n-e:e,r[e]=(2*Math.random()-1)*Math.pow(1-t/n,o),a[e]=(2*Math.random()-1)*Math.pow(1-t/n,o);this._setBuffer(s)},t.Reverb.prototype.dispose=function(){i.prototype.dispose.apply(this),this._teardownConvolverNode()},t.Convolver=function(e,i,n){t.Reverb.call(this),this._initConvolverNode(),this.input.gain.value=.5,e?(this.impulses=[],this._loadBuffer(e,i,n)):(this._seconds=3,this._decay=2,this._reverse=!1,this._buildImpulse())},t.Convolver.prototype=Object.create(t.Reverb.prototype),t.prototype.registerPreloadMethod("createConvolver",t.prototype),t.prototype.createConvolver=function(e,i,n){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS");var o=this,s=new t.Convolver(e,(function(t){"function"===typeof i&&i(t),"function"===typeof o._decrementPreload&&o._decrementPreload()}),n);return s.impulses=[],s},t.Convolver.prototype._loadBuffer=function(i,n,o){i=t.prototype._checkFileFormats(i);var s=this,r=(new Error).stack,a=t.prototype.getAudioContext(),c=new XMLHttpRequest;c.open("GET",i,!0),c.responseType="arraybuffer",c.onload=function(){if(200===c.status)a.decodeAudioData(c.response,(function(t){var e={},o=i.split("/");e.name=o[o.length-1],e.audioBuffer=t,s.impulses.push(e),s._setBuffer(e.audioBuffer),n&&n(e)}),(function(){var t=new e("decodeAudioData",r,s.url),i="AudioContext error at decodeAudioData for "+s.url;o?(t.msg=i,o(t)):console.error(i+"\n The error stack trace includes: \n"+t.stack)}));else{var t=new e("loadConvolver",r,s.url),u="Unable to load "+s.url+". The request status was: "+c.status+" ("+c.statusText+")";o?(t.message=u,o(t)):console.error(u+"\n The error stack trace includes: \n"+t.stack)}},c.onerror=function(){var t=new e("loadConvolver",r,s.url),i="There was no response from the server at "+s.url+". Check the url and internet connectivity.";o?(t.message=i,o(t)):console.error(i+"\n The error stack trace includes: \n"+t.stack)},c.send()},t.Convolver.prototype.set=null,t.Convolver.prototype.process=function(t){t.connect(this.input)},t.Convolver.prototype.impulses=[],t.Convolver.prototype.addImpulse=function(t,e,i){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this._loadBuffer(t,e,i)},t.Convolver.prototype.resetImpulse=function(t,e,i){window.location.origin.indexOf("file://")>-1&&"undefined"===window.cordova&&alert("This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS"),this.impulses=[],this._loadBuffer(t,e,i)},t.Convolver.prototype.toggleImpulse=function(t){if("number"===typeof t&&t<this.impulses.length&&this._setBuffer(this.impulses[t].audioBuffer),"string"===typeof t)for(var e=0;e<this.impulses.length;e++)if(this.impulses[e].name===t){this._setBuffer(this.impulses[e].audioBuffer);break}},t.Convolver.prototype.dispose=function(){for(var e in t.Reverb.prototype.dispose.apply(this),this.impulses)this.impulses[e]&&(this.impulses[e]=null)}}(),function(t){"use strict";t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.add({state:t,time:e})},t.TimelineState}(i),y=function(t){"use strict";return t.Clock=function(){t.Emitter.call(this);var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&this._state.add({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){var e=this.now(),i=this.context.lookAhead,n=this.context.updateInterval,o=2*this.context.lag,s=e+i+n+o;while(s>this._nextTick&&this._state){var r=this._state.getValueAtTime(this._nextTick);if(r!==this._lastState){this._lastState=r;var a=this._state.get(this._nextTick);r===t.State.Started?(this._nextTick=a.time,this.isUndef(a.offset)||(this.ticks=a.offset),this.emit("start",a.time,this.ticks)):r===t.State.Stopped?(this.ticks=0,this.emit("stop",a.time)):r===t.State.Paused&&this.emit("pause",a.time)}var c=this._nextTick;this.frequency&&(this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),r===t.State.Started&&(this.callback(c),this.ticks++))}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}(i),function(){var e=o,i=y;t.Metro=function(){this.clock=new i({callback:this.ontick.bind(this)}),this.syncedParts=[],this.bpm=120,this._init(),this.prevTick=0,this.tatumTime=0,this.tickCallback=function(){}},t.Metro.prototype.ontick=function(t){var i=t-this.prevTick,n=t-e.audiocontext.currentTime;if(!(i-this.tatumTime<=-.02)){this.prevTick=t;var o=this;this.syncedParts.forEach((function(t){t.isPlaying&&(t.incrementStep(n),t.phrases.forEach((function(t){var e=t.sequence,i=o.metroTicks%e.length;0!==e[i]&&(o.metroTicks<e.length||!t.looping)&&t.callback(n,e[i])})))})),this.metroTicks+=1,this.tickCallback(n)}},t.Metro.prototype.setBPM=function(t,i){var n=60/(t*this.tatums),o=e.audiocontext.currentTime;this.tatumTime=n;i=i||0;this.clock.frequency.setValueAtTime(this.clock.frequency.value,o),this.clock.frequency.linearRampToValueAtTime(t,o+i),this.bpm=t},t.Metro.prototype.getBPM=function(){return this.clock.getRate()/this.tatums*60},t.Metro.prototype._init=function(){this.metroTicks=0},t.Metro.prototype.resetSync=function(t){this.syncedParts=[t]},t.Metro.prototype.pushSync=function(t){this.syncedParts.push(t)},t.Metro.prototype.start=function(t){var i=t||0,n=e.audiocontext.currentTime;this.clock.start(n+i),this.setBPM(this.bpm)},t.Metro.prototype.stop=function(t){var i=t||0,n=e.audiocontext.currentTime;this.clock.stop(n+i)},t.Metro.prototype.beatLength=function(t){this.tatums=1/t/4}}(),function(){var e=o,i=120;function n(t){t.currentPart++,t.currentPart>=t.parts.length?(t.scoreStep=0,t.onended()):(t.scoreStep=0,t.parts[t.currentPart-1].stop(),t.parts[t.currentPart].start())}t.prototype.setBPM=function(t,n){for(var o in i=t,e.parts)e.parts[o]&&e.parts[o].setBPM(t,n)},t.Phrase=function(t,e,i){this.phraseStep=0,this.name=t,this.callback=e,this.sequence=i},t.Part=function(n,o){this.length=n||0,this.partStep=0,this.phrases=[],this.isPlaying=!1,this.noLoop(),this.tatums=o||.0625,this.metro=new t.Metro,this.metro._init(),this.metro.beatLength(this.tatums),this.metro.setBPM(i),e.parts.push(this),this.callback=function(){}},t.Part.prototype.setBPM=function(t,e){this.metro.setBPM(t,e)},t.Part.prototype.getBPM=function(){return this.metro.getBPM()},t.Part.prototype.start=function(t){if(!this.isPlaying){this.isPlaying=!0,this.metro.resetSync(this);var e=t||0;this.metro.start(e)}},t.Part.prototype.loop=function(t){this.looping=!0,this.onended=function(){this.partStep=0};var e=t||0;this.start(e)},t.Part.prototype.noLoop=function(){this.looping=!1,this.onended=function(){this.stop()}},t.Part.prototype.stop=function(t){this.partStep=0,this.pause(t)},t.Part.prototype.pause=function(t){this.isPlaying=!1;var e=t||0;this.metro.stop(e)},t.Part.prototype.addPhrase=function(e,i,n){var o;if(3===arguments.length)o=new t.Phrase(e,i,n);else{if(!(arguments[0]instanceof t.Phrase))throw"invalid input. addPhrase accepts name, callback, array or a p5.Phrase";o=arguments[0]}this.phrases.push(o),o.sequence.length>this.length&&(this.length=o.sequence.length)},t.Part.prototype.removePhrase=function(t){for(var e in this.phrases)this.phrases[e].name===t&&this.phrases.splice(e,1)},t.Part.prototype.getPhrase=function(t){for(var e in this.phrases)if(this.phrases[e].name===t)return this.phrases[e]},t.Part.prototype.replaceSequence=function(t,e){for(var i in this.phrases)this.phrases[i].name===t&&(this.phrases[i].sequence=e)},t.Part.prototype.incrementStep=function(t){this.partStep<this.length-1?(this.callback(t),this.partStep+=1):this.looping||this.partStep!==this.length-1||(console.log("done"),this.onended())},t.Part.prototype.onStep=function(t){this.callback=t},t.Score=function(){this.parts=[],this.currentPart=0;var t=this;for(var e in arguments)arguments[e]&&this.parts[e]&&(this.parts[e]=arguments[e],this.parts[e].nextPart=this.parts[e+1],this.parts[e].onended=function(){t.resetPart(e),n(t)});this.looping=!1},t.Score.prototype.onended=function(){this.looping?this.parts[0].start():this.parts[this.parts.length-1].onended=function(){this.stop(),this.resetParts()},this.currentPart=0},t.Score.prototype.start=function(){this.parts[this.currentPart].start(),this.scoreStep=0},t.Score.prototype.stop=function(){this.parts[this.currentPart].stop(),this.currentPart=0,this.scoreStep=0},t.Score.prototype.pause=function(){this.parts[this.currentPart].stop()},t.Score.prototype.loop=function(){this.looping=!0,this.start()},t.Score.prototype.noLoop=function(){this.looping=!1},t.Score.prototype.resetParts=function(){var t=this;this.parts.forEach((function(e){t.resetParts[e]}))},t.Score.prototype.resetPart=function(t){for(var e in this.parts[t].stop(),this.parts[t].partStep=0,this.parts[t].phrases)this.parts[t]&&(this.parts[t].phrases[e].phraseStep=0)},t.Score.prototype.setBPM=function(t,e){for(var i in this.parts)this.parts[i]&&this.parts[i].setBPM(t,e)}}(),function(){var e=o,i=y;t.SoundLoop=function(t,n){this.callback=t,this.musicalTimeMode="number"!==typeof this._interval,this._interval=n||1,this._timeSignature=4,this._bpm=60,this.isPlaying=!1,this.maxIterations=1/0;var o=this;this.clock=new i({callback:function(t){var i=t-e.audiocontext.currentTime;i>0&&o.iterations<=o.maxIterations&&o.callback(i)},frequency:this._calcFreq()})},t.SoundLoop.prototype.start=function(t){var i=t||0,n=e.audiocontext.currentTime;this.isPlaying||(this.clock.start(n+i),this.isPlaying=!0)},t.SoundLoop.prototype.stop=function(t){var i=t||0,n=e.audiocontext.currentTime;this.isPlaying&&(this.clock.stop(n+i),this.isPlaying=!1)},t.SoundLoop.prototype.pause=function(t){var i=t||0,n=e.audiocontext.currentTime;this.isPlaying&&(this.clock.pause(n+i),this.isPlaying=!1)},t.SoundLoop.prototype.syncedStart=function(t,i){var n=i||0,o=e.audiocontext.currentTime;if(t.isPlaying){if(t.isPlaying){var s=t.clock._nextTick-e.audiocontext.currentTime;this.clock.start(o+s),this.isPlaying=!0}}else t.clock.start(o+n),t.isPlaying=!0,this.clock.start(o+n),this.isPlaying=!0},t.SoundLoop.prototype._update=function(){this.clock.frequency.value=this._calcFreq()},t.SoundLoop.prototype._calcFreq=function(){return"number"===typeof this._interval?(this.musicalTimeMode=!1,1/this._interval):"string"===typeof this._interval?(this.musicalTimeMode=!0,this._bpm/60/this._convertNotation(this._interval)*(this._timeSignature/4)):void 0},t.SoundLoop.prototype._convertNotation=function(t){var e=t.slice(-1);switch(t=Number(t.slice(0,-1)),e){case"m":return this._measure(t);case"n":return this._note(t);default:console.warn("Specified interval is not formatted correctly. See Tone.js timing reference for more info: https://github.com/Tonejs/Tone.js/wiki/Time")}},t.SoundLoop.prototype._measure=function(t){return t*this._timeSignature},t.SoundLoop.prototype._note=function(t){return this._timeSignature/t},Object.defineProperty(t.SoundLoop.prototype,"bpm",{get:function(){return this._bpm},set:function(t){this.musicalTimeMode||console.warn('Changing the BPM in "seconds" mode has no effect. BPM is only relevant in musicalTimeMode when the interval is specified as a string ("2n", "4n", "1m"...etc)'),this._bpm=t,this._update()}}),Object.defineProperty(t.SoundLoop.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.musicalTimeMode||console.warn('Changing the timeSignature in "seconds" mode has no effect. BPM is only relevant in musicalTimeMode when the interval is specified as a string ("2n", "4n", "1m"...etc)'),this._timeSignature=t,this._update()}}),Object.defineProperty(t.SoundLoop.prototype,"interval",{get:function(){return this._interval},set:function(t){this.musicalTimeMode="Number"!==typeof t,this._interval=t,this._update()}}),Object.defineProperty(t.SoundLoop.prototype,"iterations",{get:function(){return this.clock.ticks}}),t.SoundLoop}(),function(){"use strict";var e=f;t.Compressor=function(){e.call(this),this.compressor=this.ac.createDynamicsCompressor(),this.input.connect(this.compressor),this.compressor.connect(this.wet)},t.Compressor.prototype=Object.create(e.prototype),t.Compressor.prototype.process=function(t,e,i,n,o,s){t.connect(this.input),this.set(e,i,n,o,s)},t.Compressor.prototype.set=function(t,e,i,n,o){"undefined"!==typeof t&&this.attack(t),"undefined"!==typeof e&&this.knee(e),"undefined"!==typeof i&&this.ratio(i),"undefined"!==typeof n&&this.threshold(n),"undefined"!==typeof o&&this.release(o)},t.Compressor.prototype.attack=function(t,e){var i=e||0;return"number"==typeof t?(this.compressor.attack.value=t,this.compressor.attack.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.attack.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):"undefined"!==typeof t&&t.connect(this.compressor.attack),this.compressor.attack.value},t.Compressor.prototype.knee=function(t,e){var i=e||0;return"number"==typeof t?(this.compressor.knee.value=t,this.compressor.knee.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.knee.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):"undefined"!==typeof t&&t.connect(this.compressor.knee),this.compressor.knee.value},t.Compressor.prototype.ratio=function(t,e){var i=e||0;return"number"==typeof t?(this.compressor.ratio.value=t,this.compressor.ratio.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.ratio.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):"undefined"!==typeof t&&t.connect(this.compressor.ratio),this.compressor.ratio.value},t.Compressor.prototype.threshold=function(t,e){var i=e||0;return"number"==typeof t?(this.compressor.threshold.value=t,this.compressor.threshold.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.threshold.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):"undefined"!==typeof t&&t.connect(this.compressor.threshold),this.compressor.threshold.value},t.Compressor.prototype.release=function(t,e){var i=e||0;return"number"==typeof t?(this.compressor.release.value=t,this.compressor.release.cancelScheduledValues(this.ac.currentTime+.01+i),this.compressor.release.linearRampToValueAtTime(t,this.ac.currentTime+.02+i)):"undefined"!==typeof number&&t.connect(this.compressor.release),this.compressor.release.value},t.Compressor.prototype.reduction=function(){return this.compressor.reduction.value},t.Compressor.prototype.dispose=function(){e.prototype.dispose.apply(this),this.compressor&&(this.compressor.disconnect(),delete this.compressor)},t.Compressor}(),function(){var e=o,i=r.convertToWav,n=e.audiocontext;t.SoundRecorder=function(){this.input=n.createGain(),this.output=n.createGain(),this.recording=!1,this.bufferSize=1024,this._channels=2,this._clear(),this._jsNode=n.createScriptProcessor(this.bufferSize,this._channels,2),this._jsNode.onaudioprocess=this._audioprocess.bind(this),this._callback=function(){},this._jsNode.connect(t.soundOut._silentNode),this.setInput(),e.soundArray.push(this)},t.SoundRecorder.prototype.setInput=function(e){this.input.disconnect(),this.input=null,this.input=n.createGain(),this.input.connect(this._jsNode),this.input.connect(this.output),e?e.connect(this.input):t.soundOut.output.connect(this.input)},t.SoundRecorder.prototype.record=function(t,e,i){this.recording=!0,e&&(this.sampleLimit=Math.round(e*n.sampleRate)),t&&i?this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer),i()}:t&&(this._callback=function(){this.buffer=this._getBuffer(),t.setBuffer(this.buffer)})},t.SoundRecorder.prototype.stop=function(){this.recording=!1,this._callback(),this._clear()},t.SoundRecorder.prototype._clear=function(){this._leftBuffers=[],this._rightBuffers=[],this.recordedSamples=0,this.sampleLimit=null},t.SoundRecorder.prototype._audioprocess=function(t){if(!1!==this.recording&&!0===this.recording)if(this.sampleLimit&&this.recordedSamples>=this.sampleLimit)this.stop();else{var e=t.inputBuffer.getChannelData(0),i=t.inputBuffer.getChannelData(1);this._leftBuffers.push(new Float32Array(e)),this._rightBuffers.push(new Float32Array(i)),this.recordedSamples+=this.bufferSize}},t.SoundRecorder.prototype._getBuffer=function(){var t=[];return t.push(this._mergeBuffers(this._leftBuffers)),t.push(this._mergeBuffers(this._rightBuffers)),t},t.SoundRecorder.prototype._mergeBuffers=function(t){for(var e=new Float32Array(this.recordedSamples),i=0,n=t.length,o=0;o<n;o++){var s=t[o];e.set(s,i),i+=s.length}return e},t.SoundRecorder.prototype.dispose=function(){this._clear();var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this._callback=function(){},this.input&&this.input.disconnect(),this.input=null,this._jsNode=null},t.prototype.saveSound=function(e,n){var o=i(e.buffer);t.prototype.writeFile([o],n,"wav")}}(),function(){t.PeakDetect=function(t,e,i,n){this.framesPerPeak=n||20,this.framesSinceLastPeak=0,this.decayRate=.95,this.threshold=i||.35,this.cutoff=0,this.cutoffMult=1.5,this.energy=0,this.penergy=0,this.currentValue=0,this.isDetected=!1,this.f1=t||40,this.f2=e||2e4,this._onPeak=function(){}},t.PeakDetect.prototype.update=function(t){var e=this.energy=t.getEnergy(this.f1,this.f2)/255;e>this.cutoff&&e>this.threshold&&e-this.penergy>0?(this._onPeak(),this.isDetected=!0,this.cutoff=e*this.cutoffMult,this.framesSinceLastPeak=0):(this.isDetected=!1,this.framesSinceLastPeak<=this.framesPerPeak?this.framesSinceLastPeak++:(this.cutoff*=this.decayRate,this.cutoff=Math.max(this.cutoff,this.threshold))),this.currentValue=e,this.penergy=e},t.PeakDetect.prototype.onPeak=function(t,e){var i=this;i._onPeak=function(){t(i.energy,e)}}}(),function(){var e=o;t.Gain=function(){this.ac=e.audiocontext,this.input=this.ac.createGain(),this.output=this.ac.createGain(),this.input.gain.value=.5,this.input.connect(this.output),e.soundArray.push(this)},t.Gain.prototype.setInput=function(t){t.connect(this.input)},t.Gain.prototype.connect=function(e){var i=e||t.soundOut.input;this.output.connect(i.input?i.input:i)},t.Gain.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.Gain.prototype.amp=function(t,i,n){i=i||0,n=n||0;var o=e.audiocontext.currentTime,s=this.output.gain.value;this.output.gain.cancelScheduledValues(o),this.output.gain.linearRampToValueAtTime(s,o+n),this.output.gain.linearRampToValueAtTime(t,o+n+i)},t.Gain.prototype.dispose=function(){var t=e.soundArray.indexOf(this);e.soundArray.splice(t,1),this.output&&(this.output.disconnect(),delete this.output),this.input&&(this.input.disconnect(),delete this.input)}}(),g=function(){var e=o;return t.AudioVoice=function(){this.ac=e.audiocontext,this.output=this.ac.createGain(),this.connect(),e.soundArray.push(this)},t.AudioVoice.prototype.play=function(t,e,i,n){},t.AudioVoice.prototype.triggerAttack=function(t,e,i){},t.AudioVoice.prototype.triggerRelease=function(t){},t.AudioVoice.prototype.amp=function(t,e){},t.AudioVoice.prototype.connect=function(t){var i=t||e.input;this.output.connect(i.input?i.input:i)},t.AudioVoice.prototype.disconnect=function(){this.output.disconnect()},t.AudioVoice.prototype.dispose=function(){this.output&&(this.output.disconnect(),delete this.output)},t.AudioVoice}(),function(){var e=o,i=g,n=r.noteToFreq,s=.15;t.MonoSynth=function(){i.call(this),this.oscillator=new t.Oscillator,this.env=new t.Envelope,this.env.setRange(1,0),this.env.setExp(!0),this.setADSR(.02,.25,.05,.35),this.oscillator.disconnect(),this.oscillator.connect(this.output),this.env.disconnect(),this.env.setInput(this.output.gain),this.oscillator.output.gain.value=1,this.oscillator.start(),this.connect(),e.soundArray.push(this)},t.MonoSynth.prototype=Object.create(t.AudioVoice.prototype),t.MonoSynth.prototype.play=function(t,e,i,n){this.triggerAttack(t,e,~~i),this.triggerRelease(~~i+(n||s))},t.MonoSynth.prototype.triggerAttack=function(t,e,i){i=~~i;var o=n(t),s=e||.1;this.oscillator.freq(o,0,i),this.env.ramp(this.output.gain,i,s)},t.MonoSynth.prototype.triggerRelease=function(t){t=t||0;this.env.ramp(this.output.gain,t,0)},t.MonoSynth.prototype.setADSR=function(t,e,i,n){this.env.setADSR(t,e,i,n)},Object.defineProperties(t.MonoSynth.prototype,{attack:{get:function(){return this.env.aTime},set:function(t){this.env.setADSR(t,this.env.dTime,this.env.sPercent,this.env.rTime)}},decay:{get:function(){return this.env.dTime},set:function(t){this.env.setADSR(this.env.aTime,t,this.env.sPercent,this.env.rTime)}},sustain:{get:function(){return this.env.sPercent},set:function(t){this.env.setADSR(this.env.aTime,this.env.dTime,t,this.env.rTime)}},release:{get:function(){return this.env.rTime},set:function(t){this.env.setADSR(this.env.aTime,this.env.dTime,this.env.sPercent,t)}}}),t.MonoSynth.prototype.amp=function(t,e){var i=e||0;return"undefined"!==typeof t&&this.oscillator.amp(t,i),this.oscillator.amp().value},t.MonoSynth.prototype.connect=function(t){var i=t||e.input;this.output.connect(i.input?i.input:i)},t.MonoSynth.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.MonoSynth.prototype.dispose=function(){i.prototype.dispose.apply(this),this.env&&this.env.dispose(),this.oscillator&&this.oscillator.dispose()}}(),function(){var e=o,i=l,n=r.noteToFreq;t.PolySynth=function(n,o){this.audiovoices=[],this.notes={},this._newest=0,this._oldest=0,this.maxVoices=o||8,this.AudioVoice=void 0===n?t.MonoSynth:n,this._voicesInUse=new i(0),this.output=e.audiocontext.createGain(),this.connect(),this._allocateVoices(),e.soundArray.push(this)},t.PolySynth.prototype._allocateVoices=function(){for(var t=0;t<this.maxVoices;t++)this.audiovoices.push(new this.AudioVoice),this.audiovoices[t].disconnect(),this.audiovoices[t].connect(this.output)},t.PolySynth.prototype.play=function(t,e,i,n){n=n||1;this.noteAttack(t,e,i),this.noteRelease(t,i+n)},t.PolySynth.prototype.noteADSR=function(t,i,n,o,s,r){var a=e.audiocontext.currentTime,c=(r=r||0,a+r);this.audiovoices[this.notes[t].getValueAtTime(c)].setADSR(i,n,o,s)},t.PolySynth.prototype.setADSR=function(t,e,i,n){this.audiovoices.forEach((function(o){o.setADSR(t,e,i,n)}))},t.PolySynth.prototype.noteAttack=function(o,s,r){r=~~r;var a,c=e.audiocontext.currentTime+r,u=n(o),p=s||.1;if(this.notes[u]&&null!==this.notes[u].getValueAtTime(c)&&this.noteRelease(u,0),this._voicesInUse.getValueAtTime(c)<this.maxVoices)a=Math.max(~~this._voicesInUse.getValueAtTime(c),0);else{a=this._oldest;var h=t.prototype.freqToMidi(this.audiovoices[this._oldest].oscillator.freq().value);this.noteRelease(h),this._oldest=(this._oldest+1)%(this.maxVoices-1)}this.notes[u]=new i,this.notes[u].setValueAtTime(a,c);var l=null===this._voicesInUse._searchBefore(c)?0:this._voicesInUse._searchBefore(c).value;if(this._voicesInUse.setValueAtTime(l+1,c),this._updateAfter(c,1),this._newest=a,"number"===typeof p){var d=1/this._voicesInUse.getValueAtTime(c)*2;p=p>d?d:p}this.audiovoices[a].triggerAttack(u,p,r)},t.PolySynth.prototype._updateAfter=function(t,e){if(null!==this._voicesInUse._searchAfter(t)){this._voicesInUse._searchAfter(t).value+=e;var i=this._voicesInUse._searchAfter(t).time;this._updateAfter(i,e)}},t.PolySynth.prototype.noteRelease=function(t,i){var o=e.audiocontext.currentTime,s=i||0,r=o+s;if(t){var a=n(t);if(this.notes[a]&&null!==this.notes[a].getValueAtTime(r)){var c=Math.max(~~this._voicesInUse.getValueAtTime(r).value,1);this._voicesInUse.setValueAtTime(c-1,r),c>0&&this._updateAfter(r,-1),this.audiovoices[this.notes[a].getValueAtTime(r)].triggerRelease(s),this.notes[a].dispose(),delete this.notes[a],this._newest=0===this._newest?0:(this._newest-1)%(this.maxVoices-1)}else console.warn("Cannot release a note that is not already playing")}else for(var u in this.audiovoices.forEach((function(t){t.triggerRelease(s)})),this._voicesInUse.setValueAtTime(0,r),this.notes)this.notes[u].dispose(),delete this.notes[u]},t.PolySynth.prototype.connect=function(t){var i=t||e.input;this.output.connect(i.input?i.input:i)},t.PolySynth.prototype.disconnect=function(){this.output&&this.output.disconnect()},t.PolySynth.prototype.dispose=function(){this.audiovoices.forEach((function(t){t.dispose()})),this.output&&(this.output.disconnect(),delete this.output)}}(),function(){var e=f;function i(t){for(var e,i="number"===typeof t?t:50,n=44100,o=new Float32Array(n),s=Math.PI/180,r=0;r<n;++r)e=2*r/n-1,o[r]=(3+i)*e*20*s/(Math.PI+i*Math.abs(e));return o}t.Distortion=function(n,o){if(e.call(this),"undefined"===typeof n&&(n=.25),"number"!==typeof n)throw new Error("amount must be a number");if("undefined"===typeof o&&(o="2x"),"string"!==typeof o)throw new Error("oversample must be a String");var s=t.prototype.map(n,0,1,0,2e3);this.waveShaperNode=this.ac.createWaveShaper(),this.amount=s,this.waveShaperNode.curve=i(s),this.waveShaperNode.oversample=o,this.input.connect(this.waveShaperNode),this.waveShaperNode.connect(this.wet)},t.Distortion.prototype=Object.create(e.prototype),t.Distortion.prototype.process=function(t,e,i){t.connect(this.input),this.set(e,i)},t.Distortion.prototype.set=function(e,n){if(e){var o=t.prototype.map(e,0,1,0,2e3);this.amount=o,this.waveShaperNode.curve=i(o)}n&&(this.waveShaperNode.oversample=n)},t.Distortion.prototype.getAmount=function(){return this.amount},t.Distortion.prototype.getOversample=function(){return this.waveShaperNode.oversample},t.Distortion.prototype.dispose=function(){e.prototype.dispose.apply(this),this.waveShaperNode&&(this.waveShaperNode.disconnect(),this.waveShaperNode=null)}}(),function(){var t=o}()}))},"4e3c":function(t,e,i){"use strict";i("fe4d")},"4f6d":function(t,e,i){"use strict";i("902d")},5616:function(t,e,i){t.exports=i.p+"img/cardStep3.d51ff60f.jpg"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-main",[i("router-view")],1)],1)},s=[],r={name:"App",data:function(){return{}}},a=r,c=(i("5d71"),i("2877")),u=i("6544"),p=i.n(u),h=i("7496"),l=i("f6c4"),d=Object(c["a"])(a,o,s,!1,null,"e66a076e",null),f=d.exports;p()(d,{VApp:h["a"],VMain:l["a"]});var m=i("8c4f"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","fill-height":""}},[n("div",{staticClass:"background"},[n("div",{attrs:{id:"stars"}}),n("div",{attrs:{id:"stars2"}}),n("div",{attrs:{id:"stars3"}})]),n("div",{staticClass:"contents"},[n("nav",[n("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("div",t._g(t._b({staticClass:"glow mx-2",on:{click:t.moveWelcomePage}},"div",o,!1),i))]}}])},[n("span",[t._v("웰컴페이지 GO GO!")])])],1),n("v-row",{staticClass:"planets"},[n("div",{staticClass:"left-section col-sm-12 col-lg-6"},[n("div",{staticClass:"venus pa-1"},[n("div",{staticClass:"mascot-card"},[n("img",{staticClass:"d-xl-block d-sm-none d-lg-block",attrs:{src:i("a9c4"),alt:"mascot-card"},on:{click:t.moveSelectCardGame}}),n("p",{on:{click:t.moveSelectCardGame}},[t._v("카드 게임")])]),n("div",{staticClass:"venus-img"},[n("img",{staticClass:"spin",attrs:{src:i("9230"),alt:"venus"},on:{click:t.moveSelectCardGame}})])])]),n("div",{staticClass:"right-section col-sm-12 col-lg-6"},[n("div",{staticClass:"greenus pa-1"},[n("div",{staticClass:"mascot-camera"},[n("img",{staticClass:"d-xl-block d-sm-none d-lg-block",attrs:{src:i("7288"),alt:"mascot-camera"},on:{click:t.moveSmartCameraGame}}),n("p",{on:{click:t.moveSmartCameraGame}},[t._v("카메라 게임")])]),n("div",{staticClass:"greenus-img"},[n("img",{staticClass:"spin",attrs:{src:i("c534"),alt:"greenus"},on:{click:t.moveSmartCameraGame}})])])])])],1)])},y=[],g={name:"MainPage",data:function(){return{}},methods:{moveSmartCameraGame:function(){this.$router.push({name:"SmartCameraGame"})},moveSelectCardGame:function(){this.$router.push({name:"SelectCardGame"})},moveWelcomePage:function(){this.$router.push({name:"WelcomePage"})}}},_=g,T=(i("9435"),i("a523")),b=i("0fd9"),x=i("3a2f"),S=Object(c["a"])(_,v,y,!1,null,"07f4c076",null),w=S.exports;p()(S,{VContainer:T["a"],VRow:b["a"],VTooltip:x["a"]});var A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","fill-height":""}},[n("div",{staticClass:"background"},[n("div",{attrs:{id:"stars"}}),n("div",{attrs:{id:"stars2"}}),n("div",{attrs:{id:"stars3"}})]),n("div",{staticClass:"contents"},[n("nav",[n("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("div",t._g(t._b({staticClass:"glow",on:{click:t.moveMainPage}},"div",o,!1),i))]}}])},[n("span",[t._v("게임 선택 GO GO!")])])],1),t.game_started?n("div",{staticClass:"camera-game-field"},[n("div",{staticClass:"head-section"},[t.is_start?n("span",[n("h1",[t._v(t._s(this.question)+"을 보여주세요😉")])]):n("span",[n("button",{staticClass:"gold-button",on:{click:t.initialize}},[t._v("문제 보기")])])]),n("v-row",{staticClass:"body-section"},[n("div",{staticClass:"camera-section col-md-6 col-xs-12"},[n("vue-web-cam",{ref:"webcam",attrs:{"device-id":t.deviceId},on:{started:t.onStarted,stopped:t.onStopped,error:t.onError,cameras:t.onCameras}}),n("div",{staticClass:"camera-btns"},[n("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{fab:"",large:""},on:{click:t.onCapture}},"v-btn",o,!1),i),[n("v-icon",[t._v("mdi-camera-iris")])],1)]}}],null,!1,816499637)},[n("span",[t._v("제출하기!")])]),n("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{fab:"",large:""},on:{click:t.onStop}},"v-btn",o,!1),i),[n("v-icon",[t._v("mdi-camera-off")])],1)]}}],null,!1,1991334247)},[n("span",[t._v("카메라 끄기")])]),n("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{fab:"",large:""},on:{click:t.onStart}},"v-btn",o,!1),i),[n("v-icon",[t._v("mdi-camera")])],1)]}}],null,!1,2144669309)},[n("span",[t._v("카메라 켜기!")])])],1)],1),n("v-card",{staticClass:"answer-section col-md-6 col-xs-12",attrs:{elevation:"0"}},[t.loading?n("div",[n("div",{staticClass:"progress"},[n("h1",[t._v("정답 확인중입니다")]),n("v-progress-linear",{attrs:{active:t.loading,indeterminate:t.loading,color:"#FFEE58"}})],1)]):t._e(),t.is_done?n("div",[t.is_correct?n("div",{staticClass:"answer"},[n("img",{attrs:{src:i("e27e")}}),n("h1",{staticClass:"my-1"},[t._v("정답입니다!")]),n("h2",{staticClass:"my-1"},[t._v("정확도 : "+t._s(this.score)+"%")]),n("div",[n("button",{staticClass:"gold-button mx-auto",on:{click:t.regame}},[t._v(" 다시하기 ")])])]):n("div",{staticClass:"answer"},[n("img",{attrs:{src:i("d981")}}),n("h1",{staticClass:"my-1"},[t._v("틀렸어요😥")]),n("h2",{staticClass:"my-1"},[t._v("가져온 물건 : "+t._s(this.category))]),n("div",[n("button",{staticClass:"gold-button mx-auto",on:{click:t.regame}},[t._v(" 다시하기 ")])])])]):t._e()])],1)],1):n("div",{staticClass:"start-button"},[t.languageModal?t._e():n("Stepper",{staticClass:"d-none d-md-block",on:{stepperDone:t.stepperDone}}),t.languageModal?t._e():n("button",{staticClass:"gold-button mx-auto d-block d-md-none",on:{click:t.getGameStart}},[t._v(" 게임하기 ")])],1),t.languageModal?n("LanguageModal",{on:{close:t.moveMainPage,language:t.getMessage}}):t._e()],1)])},C=[],P=i("ade3"),k=i("4f96"),O=i("5530"),M=(i("7db0"),i("fb6a"),i("b3cb")),E=i("2f62"),F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper"},[i("div",{staticClass:"modal-container"},[t._m(0),i("div",{staticClass:"modal-body"},[i("v-btn-toggle",{staticClass:"languages",attrs:{mandatory:"",dark:"",color:"deep-purple accent-3",group:""},model:{value:t.selected_language,callback:function(e){t.selected_language=e},expression:"selected_language"}},t._l(t.languages,(function(e,n){return i("v-btn",{key:n,staticClass:"language"},[t._v(" "+t._s(e.name)+" ")])})),1)],1),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"back-button",on:{click:function(e){return t.$emit("close")}}},[t._v("돌아가기")]),i("button",{staticClass:"select-button",on:{click:t.sendInfo}},[t._v("선택 완료")])])])])])},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("p",[t._v("📚학습할 언어를 선택해 주세요📚")])])}],q={name:"LanguageModal",data:function(){return{selected_language:void 0,languages:[{id:0,name:"한국어"},{id:1,name:"영  어"},{id:2,name:"중국어"},{id:3,name:"일본어"},{id:4,name:"베트남어"},{id:5,name:"프랑스어"},{id:6,name:"스페인어"}]}},mounted:function(){},methods:{sendInfo:function(){this.$emit("language",this.selected_language)}}},R=q,D=(i("158e"),i("8336")),N=i("a609"),B=Object(c["a"])(R,F,V,!1,null,"2c7a6e26",null),I=B.exports;p()(B,{VBtn:D["a"],VBtnToggle:N["a"]});var U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stepper"},[n("p",{staticClass:"howToPlay"},[t._v("게임 방법")]),n("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:t.e1>1,step:"1"}},[t._v(" 언어 선택 ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:t.e1>2,step:"2"}},[t._v(" 문제 보기 ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:t.e1>3,step:"3"}},[t._v(" 사진 찍기 ")]),n("v-divider"),n("v-stepper-step",{attrs:{step:"4"}},[t._v(" 정답 확인 ")])],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("a412")}})]),n("p",[t._v("🌍 원하는 언어를 선택해주세요")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{color:"warning"},on:{click:t.playGame}},[t._v(" 게임 시작 ")]),n("v-spacer"),n("v-btn",{staticClass:"text--white",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=2}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"2"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("67e3")}})]),n("p",[t._v("🔠 [문제보기] 버튼을 눌러 단어를 확인해주세요")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=1}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=3}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"3"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("08d1")}})]),n("p",[t._v("📷 단어에 맞는 물건을 사진찍어주세요")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=2}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=4}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"4"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("7cdd")}})]),n("p",[t._v(" 🎇 정답을 확인하고 [다시하기] 버튼을 눌러 게임을 마음껏 즐겨보세요 ")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=3}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{color:"warning"},on:{click:t.playGame}},[t._v(" 게임 시작 ")])],1)],1)],1)],1)],1)},G=[],j={data:function(){return{e1:1}},methods:{playGame:function(){this.$emit("stepperDone",!0)}}},L=j,z=(i("cb05"),i("b0af")),$=i("ce7e"),Z=i("2fa4"),W=i("7e85"),X=i("e516"),Y=i("9c54"),Q=i("56a4"),H=Object(c["a"])(L,U,G,!1,null,"4d5b5241",null),J=H.exports;p()(H,{VBtn:D["a"],VCard:z["a"],VDivider:$["a"],VSpacer:Z["a"],VStepper:W["a"],VStepperContent:X["a"],VStepperHeader:Y["a"],VStepperItems:Y["b"],VStepperStep:Q["a"]});var K=i("bc3a"),tt=i.n(K),et=(i("ccfa"),"SmartCameraStore"),it={name:"SmartCameraGame",components:{"vue-web-cam":M["WebCam"],LanguageModal:I,Stepper:J},data:function(){return{camera:null,deviceId:null,devices:[],loading:!1,questions:[["컵","책","의자"],["cup","book","chair"],["杯子","書","椅子"],["カップ","本","椅子"],["cốc","sách","cái ghế"],["Coupe","livre","chaise"],["taza","libro","silla"]],img:null,is_start:!1,game_started:!1,languageModal:!1,selected_language:0,stepper:!1,question:"",answer:""}},computed:Object(O["a"])(Object(O["a"])(Object(O["a"])(Object(O["a"])({device:function(){var t=this;return this.devices.find((function(e){return e.deviceId===t.deviceId}))}},Object(E["b"])(et,{score:"getScore"})),Object(E["b"])(et,{category:"getCategory"})),Object(E["b"])(et,{is_correct:"getIsCorrect"})),Object(E["b"])(et,{is_done:"getIsDone"})),watch:{camera:function(t){this.deviceId=t},devices:function(){var t=Object(k["a"])(this.devices),e=t[0];t.slice(1);e&&(this.camera=e.deviceId,this.deviceId=e.deviceId)}},methods:Object(P["a"])({onCapture:function(){var t=this;this.loading=!0;var e=this.$refs.webcam.capture();tt.a.post("https://ssokssok.site/ai/smartcamera/detection/",{image:e,question:this.answer}).then((function(e){var i=e.data;t.$store.dispatch("SmartCameraStore/setInfo",i),t.loading=!1})).catch((function(t){console.log(t)}))},onStarted:function(){},onStopped:function(){},onStart:function(){this.$refs.webcam.start()},onStop:function(){this.$refs.webcam.stop()},onError:function(t){console.log("On Error Event",t)},onCameras:function(t){this.devices=t},onCameraChange:function(t){this.deviceId=t,this.camera=t},initialize:function(){this.$store.dispatch("SmartCameraStore/initializeInfo"),this.is_start=!0;var t=3*Math.random(),e=parseInt(t);this.question=this.questions[this.selected_language][e],this.answer=this.questions[1][e]},moveMainPage:function(){this.$router.push({name:"MainPage"})},regame:function(){this.initialize(),this.is_start=!1},getGameStart:function(){this.languageModal=!0},getMessage:function(t){this.languageModal=!1,this.game_started=!0,this.selected_language=t},stepperDone:function(t){1==t&&(this.languageModal=!0)}},"moveMainPage",(function(){this.$router.push({name:"MainPage"})})),created:function(){this.initialize(),this.is_start=!1}},nt=it,ot=(i("4e3c"),i("132d")),st=i("8e36"),rt=Object(c["a"])(nt,A,C,!1,null,"4697828c",null),at=rt.exports;p()(rt,{VBtn:D["a"],VCard:z["a"],VContainer:T["a"],VIcon:ot["a"],VProgressLinear:st["a"],VRow:b["a"],VTooltip:x["a"]});var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","fill-height":""}},[n("div",{staticClass:"background"},[n("div",{attrs:{id:"stars"}}),n("div",{attrs:{id:"stars2"}}),n("div",{attrs:{id:"stars3"}})]),n("div",{staticClass:"contents"},[n("nav",[n("div",{staticClass:"logo"},[n("img",{staticClass:"avatar d-none d-sm-block",attrs:{src:i("9090"),alt:"welcome-icon"}}),n("p",[t._v("SSOK SSOK")])]),t.getCheckLogin?n("button",{staticClass:"auth-button",on:{click:t.logout}},[t._v(" Logout ")]):n("button",{staticClass:"auth-button",on:{click:t.google}},[t._v("Google")])]),n("v-row",[n("div",{staticClass:"loginZone col-sm-12 col-lg-6"},[n("div",[n("p",[t._v(" 다양한 언어를 "),n("br"),t._v(" 재미있게 배워보아요! ")]),n("button",{staticClass:"gold-button",on:{click:t.moveMainPage}},[t._v("게임 시작")])])]),n("div",{staticClass:"cosmosZone col-sm-0 col-lg-6"},[n("Cosmos")],1)])],1)])},ut=[],pt=(i("5319"),i("ac1f"),i("4d63"),i("25f0"),i("841c"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"cosmos"}},[i("div",{staticClass:"comet-rain"},[i("svg",{staticClass:"svg-defs",attrs:{role:"presentation",id:"svg-comet","data-name":"comet",viewBox:"0 0 195 173.05",width:"195",height:"173.05"}},[i("symbol",{attrs:{id:"comet"}},[i("path",{attrs:{d:"M192.39.66c-33.66,31.46-93.3,81.16-129,108.88L3.42,156c-5,3.89-4.29,11.28.74,15.4s12.84-.83,13.1-1.07C51.09,138.62,82.6,104.72,116.64,73c8.89-8.29,66.23-59.5,77.47-70.13C196.17,1,194.24-1.08,192.39.66Z"}})])]),i("svg",{attrs:{role:"presentation",width:"0",height:"0"}},[i("defs",[i("linearGradient",{attrs:{id:"gradient",x1:"194.94",y1:"4.2",x2:"11.72",y2:"161.98",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0%","stop-color":"#fff","stop-opacity":"0.03"}}),i("stop",{attrs:{offset:"100%","stop-color":"var(--t-sun-color)"}})],1)],1)]),i("svg",{staticClass:"comet-01 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})]),i("svg",{staticClass:"comet-02 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})]),i("svg",{staticClass:"comet-03 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})]),i("svg",{staticClass:"comet-04 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})]),i("svg",{staticClass:"comet-05 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})]),i("svg",{staticClass:"comet-06 comet-instance",attrs:{role:"presentation",width:"195",height:"173.05",viewBox:"0 0 195 173.05"}},[i("use",{attrs:{"xlink:href":"#comet"}})])]),i("div",{staticClass:"solar-system-animation"},[i("svg",{staticClass:"animation-scene",attrs:{id:"animation-scene",viewBox:"0 0 1400 1400"}},[i("g",{attrs:{id:"Solar-system"}},[i("circle",{staticClass:"astral-paths earth-path",attrs:{id:"sun-path",cx:"700",cy:"700",r:"446.73"}}),i("g",{staticClass:"system-sun",attrs:{id:"system-sun"}},[i("g",{staticClass:"shadow-02-container"},[i("path",{staticClass:"sun-system-shadow-02",attrs:{id:"Shadow-2",d:"M891,701.53c-.73-17.83-24.69-14.39-27-34.15-.62-14.17,22.33-20.33,13.08-40.67-7.35-16.19-28.2-3.64-37.76-21-5.88-12.84,13-27.52-3.14-42.69-12.85-12.07-27.42,7.67-42.74-4.61-10.24-9.56,1.73-30.51-18.88-38.2-16.4-6.13-22.46,17.81-41.22,12.46-13-4.82-9.83-28.86-31.75-27.91-17.44.76-14.09,25.24-33.42,27.64-13.85.64-19.88-22.82-39.78-13.36-15.84,7.52-3.57,28.83-20.54,38.6-12.56,6-26.91-13.3-41.75,3.22-11.82,13.14,7.49,28-4.52,43.69-9.36,10.47-29.85-1.76-37.38,19.31-6,16.76,17.41,23,12.18,42.13-4.72,13.33-28.24,10-27.31,32.46.73,17.83,24.69,14.39,27,34.15.62,14.17-22.33,20.33-13.08,40.67,7.35,16.19,28.19,3.64,37.75,21,5.89,12.84-13,27.51,3.14,42.69,12.86,12.07,27.43-7.68,42.76,4.61,10.22,9.56-1.73,30.51,18.87,38.2,16.4,6.13,22.46-17.81,41.22-12.46,13,4.82,9.83,28.86,31.75,27.91,17.45-.76,14.09-25.24,33.42-27.64,13.85-.64,19.88,22.82,39.78,13.36,15.84-7.52,3.57-28.82,20.53-38.6,12.57-6,26.92,13.3,41.77-3.22,11.81-13.14-7.5-28,4.52-43.69,9.35-10.47,29.84,1.75,37.37-19.31,6-16.76-17.41-23-12.18-42.13C868.4,720.66,891.91,723.94,891,701.53Z"}})]),i("g",{staticClass:"shadow-01-container"},[i("path",{staticClass:"sun-system-shadow-01",attrs:{id:"Shadow-1",d:"M853.11,701.23c-.59-14.3-19.79-11.54-21.66-27.38-.51-11.36,17.89-16.3,10.48-32.61-5.9-13-22.61-2.92-30.27-16.82-4.72-10.29,10.43-22.06-2.52-34.22-10.31-9.68-22,6.15-34.27-3.7-8.21-7.66,1.39-24.46-15.13-30.63-13.15-4.91-18,14.28-33,10-10.46-3.87-7.88-23.14-25.45-22.38-14,.61-11.3,20.23-26.8,22.16-11.11.51-15.94-18.3-31.89-10.72-12.7,6-2.86,23.12-16.47,31-10.07,4.82-21.57-10.66-33.47,2.58-9.48,10.54,6,22.47-3.63,35-7.5,8.4-23.93-1.41-30,15.48-4.8,13.44,14,18.41,9.77,33.78-3.78,10.69-22.64,8.06-21.89,26,.59,14.3,19.79,11.54,21.66,27.38.51,11.36-17.89,16.3-10.48,32.61,5.9,13,22.6,2.92,30.27,16.81,4.72,10.3-10.44,22.07,2.52,34.23,10.31,9.68,22-6.15,34.27,3.7,8.2,7.67-1.38,24.46,15.13,30.63,13.15,4.91,18-14.28,33-10,10.46,3.87,7.88,23.14,25.45,22.38,14-.61,11.3-20.23,26.8-22.16,11.11-.51,15.94,18.3,31.89,10.72,12.7-6,2.86-23.12,16.46-31,10.07-4.82,21.58,10.66,33.48-2.58,9.48-10.54-6-22.47,3.63-35,7.5-8.39,23.93,1.4,30-15.48,4.8-13.44-14-18.41-9.77-33.78C835,716.56,853.86,719.19,853.11,701.23Z"}})]),i("g",{staticClass:"sun-center",attrs:{id:"Sun-Center"}},[i("g",{attrs:{id:"sun-bg"}},[i("ellipse",{staticClass:"sun-system-bg",attrs:{cx:"700.1",cy:"700.02",rx:"112.62",ry:"111.31"}})]),i("g",{staticClass:"sun-system-patterns",attrs:{id:"solar-pattern"}},[i("path",{attrs:{d:"M645.23,691.65c-22.92-1.52-43.41,35.65-17.18,45.57,23.25,3.94,10-15.63,23.57-22C666.1,709.92,671.45,691.23,645.23,691.65Z"}}),i("path",{attrs:{d:"M677.68,619.74c-11,4.66,2.61,17.09,7.19,6.73C686.21,622.31,681.56,618.62,677.68,619.74Z"}}),i("path",{attrs:{d:"M677.33,650.71c-2.92-9.79-21.62-11.71-23.4-.51C626.38,669.21,686.18,680.3,677.33,650.71Z"}}),i("path",{attrs:{d:"M692.35,637.33c-4.34,0-4.35,6.75,0,6.75S696.71,637.33,692.35,637.33Z"}}),i("path",{attrs:{d:"M796.8,693.83c-2.73-40.32-54.15-24.47-22.92,8.42,3.83,12.2-32.82,31.45-1.68,34.78C789.86,732.64,796.87,710.12,796.8,693.83Z"}}),i("path",{attrs:{d:"M760.72,702c-3.23-6.51-12.89-1.75-10.73,4.83C752.53,714.43,764,708.8,760.72,702Z"}}),i("path",{attrs:{d:"M752.51,745.21c-4.35,0-4.35,6.76,0,6.76S756.87,745.21,752.51,745.21Z"}}),i("path",{attrs:{d:"M645.85,742.12c-4.35,0-4.36,6.75,0,6.75S650.2,742.12,645.85,742.12Z"}})])])]),i("g",{staticClass:"system-earth-moon-container"},[i("g",{staticClass:"system-earth-moon",attrs:{id:"system-earth"}},[i("circle",{staticClass:"astral-paths moon-path",attrs:{cx:"700",cy:"257.25",r:"163.79"}}),i("g",{staticClass:"system-earth",attrs:{id:"earth"}},[i("circle",{staticClass:"earth-shadow-02",attrs:{id:"Shadow-2-2",cx:"700",cy:"255.79",r:"95.31"}}),i("circle",{staticClass:"earth-shadow-01 cls-5",attrs:{id:"Shadow-1-2",cx:"699.31",cy:"256.48",r:"76.5"}}),i("g",{staticClass:"planet",attrs:{id:"Planet"}},[i("circle",{staticClass:"earth-water",attrs:{id:"water-bg",cx:"699.7",cy:"256.09",r:"56.15"}}),i("g",{staticClass:"earth-continent",attrs:{id:"continents"}},[i("path",{attrs:{d:"M687.11,207.26c2,4.53,8.75,4.4,11.32.86,1.82-3.13,1.9-8.09,6.22-8C702.06,200.07,679.4,198.12,687.11,207.26Z"}}),i("path",{attrs:{d:"M726.44,287.35c-6.77-1.25-15.74,18.37-7.09,17.24C725.52,302.43,734.86,289.49,726.44,287.35Z"}}),i("path",{attrs:{d:"M676.87,217.52c-2.48-13.89-8.65-9-8.58-.22C668.14,219.59,676.53,218.46,676.87,217.52Z"}}),i("path",{attrs:{d:"M753.7,240.67c-2.54-7.48-5.41-14.3-10.86-20.5a56.06,56.06,0,0,0-7.18-7.19c-17.83,3.73-24.3,9-45.48,4.27-2.71-4.14-8.38,2.63-9.53,4.15-.85.5-4.44,2.31-4.81,3.12-.55,2.89,5.34,6,1.82,9a7.84,7.84,0,0,1-4,1.22c-9.43-.13-11.36,5.3-11.92,10.35.48,11,12.69,1.25,16.93-1.65,6.47-2.64,5.35,3.6,8.22,3,5.12-1.24,22.63-4.65,16,5.07-13.25,9-15.93-10.69-35,1.3-11.15-1.69-23.4,8.5-15.33,18.65,5.8,9.29,19.07,4.11,27.05,8.78,4.92,9,2.51,19.76,8.19,28.33a12.37,12.37,0,0,0,3.79,3.12,57.43,57.43,0,0,0,6.74.55c6.64-1.9,12.85-10.16,15.21-16.53,3.59-9.8,2.31-14.54,10.42-22.33,0-6.05,2.53-14.53,10-16,9-.21,10.26,9,17.54,11.44a12.66,12.66,0,0,0,3.83-5.63,53.91,53.91,0,0,0,.45-7A56.51,56.51,0,0,0,753.7,240.67Z"}})])])]),i("g",{staticClass:"system-moonlight",attrs:{id:"system-moonlight"}},[i("circle",{staticClass:"moon-shadow-02",attrs:{id:"Shadow-2-3",cx:"700",cy:"92.85",r:"40"}}),i("circle",{staticClass:"moon-shadow-01",attrs:{id:"Shadow-1-3",cx:"700",cy:"92.85",r:"30.66"}}),i("g",{attrs:{id:"moon-system-center"}},[i("circle",{staticClass:"moon-center",attrs:{id:"moon-system-bg",cx:"700",cy:"92.85",r:"20.47"}}),i("g",{staticClass:"moon-pattern",attrs:{id:"moon-pattern"}},[i("ellipse",{attrs:{cx:"692.39",cy:"81.87",rx:"2.95",ry:"2.96"}}),i("ellipse",{attrs:{cx:"710.87",cy:"101.69",rx:"5.17",ry:"5.27",transform:"translate(607.73 812.35) rotate(-89.88)"}}),i("ellipse",{attrs:{cx:"700.69",cy:"103.74",rx:"2.24",ry:"2.28",transform:"translate(595.52 804.22) rotate(-89.88)"}}),i("ellipse",{attrs:{cx:"705.24",cy:"94.63",rx:"1.39",ry:"1.47",transform:"translate(609.17 799.68) rotate(-89.88)"}}),i("ellipse",{attrs:{cx:"713.68",cy:"93.91",rx:"0.59",ry:"0.63",transform:"translate(618.31 807.4) rotate(-89.88)"}}),i("ellipse",{attrs:{cx:"703.44",cy:"78.86",rx:"2.49",ry:"2.63",transform:"translate(623.15 782.14) rotate(-89.88)"}}),i("ellipse",{attrs:{cx:"686.07",cy:"99.66",rx:"1.21",ry:"1.24",transform:"matrix(0, -1, 1, 0, 585.01, 785.53)"}}),i("ellipse",{attrs:{cx:"689.2",cy:"87.88",rx:"1.21",ry:"1.22",transform:"matrix(0, -1, 1, 0, 599.91, 776.9)"}}),i("ellipse",{attrs:{cx:"694.15",cy:"87.54",rx:"1.61",ry:"1.7",transform:"matrix(0, -1, 1, 0, 605.19, 781.51)"}})])])])])])])])])])}),ht=[],lt={name:"Cosmos",data:function(){return{}},mounted:function(){},methods:{}},dt=lt,ft=(i("fd91"),Object(c["a"])(dt,pt,ht,!1,null,null,null)),mt=ft.exports,vt="https://ssokssok.site/api",yt="accessToken",gt="https://ssokssok.site",_t=vt+"/oauth2/authorize/google?redirect_uri="+gt,Tt={name:"WelcomePage",components:{Cosmos:mt},data:function(){return{user:this.userName}},computed:Object(O["a"])(Object(O["a"])({},Object(E["c"])("UserStore",["userName"])),{},{getCheckLogin:function(){return this.$store.getters["UserStore/getCheckLogin"]}}),mounted:function(){this.getToken()},methods:{moveMainPage:function(){this.$router.push({name:"MainPage"})},google:function(){window.location.href=_t},getUrlParameter:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),i=e.exec(window.location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},getUser:function(){localStorage.getItem(yt)&&(this.$store.dispatch("UserStore/fetchUser"),this.$router.push({name:"WelcomePage"}).catch((function(){})))},getToken:function(){var t=this.getUrlParameter("token");t&&localStorage.setItem(yt,t),this.getUser()},logout:function(){this.$store.dispatch("UserStore/logout")}}},bt=Tt,xt=(i("a863"),Object(c["a"])(bt,ct,ut,!1,null,"6f72687d",null)),St=xt.exports;p()(xt,{VContainer:T["a"],VRow:b["a"]});var wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","fill-height":""}},[i("div",{staticClass:"background"},[i("div",{attrs:{id:"stars"}}),i("div",{attrs:{id:"stars2"}}),i("div",{attrs:{id:"stars3"}})]),i("div",{staticClass:"contents"},[i("nav",[i("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[i("div",t._g(t._b({staticClass:"glow",on:{click:t.moveMainPage}},"div",o,!1),n))]}}])},[i("span",[t._v("게임 선택 GO GO!")])])],1),i("div",{staticClass:"stepperArea"},[t.goToSelect?t._e():i("Stepper2",{staticClass:"d-none d-md-block",on:{stepperDone:t.stepperDone}}),i("button",{staticClass:"gold-button mx-auto d-block d-md-none",on:{click:t.stepperDone}},[t._v(" 게임하기 ")]),t.goToSelect?i("CardCategory"):t._e()],1)])])},At=[],Ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","fill-height":""}},[i("v-btn-toggle",{staticClass:"languages-big d-none d-md-flex",attrs:{mandatory:"",dark:"",color:"deep-purple accent-3"},model:{value:t.selected_language,callback:function(e){t.selected_language=e},expression:"selected_language"}},t._l(t.languages,(function(e,n){return i("v-btn",{key:n,staticClass:"language"},[t._v(" "+t._s(e.name)+" ")])})),1),i("v-btn-toggle",{staticClass:"languages-small d-flex d-md-none mx-auto",attrs:{mandatory:"",dark:"",color:"deep-purple accent-3"},model:{value:t.selected_language,callback:function(e){t.selected_language=e},expression:"selected_language"}},t._l(t.languages,(function(e,n){return i("v-btn",{key:n,staticClass:"language"},[t._v(" "+t._s(e.name)+" ")])})),1),i("v-row",{staticClass:"category-field"},[i("div",{staticClass:"col-lg-6"},[i("SelectCard",{attrs:{category:t.categories[0]}})],1),i("div",{staticClass:"col-lg-6"},[i("SelectCard",{attrs:{category:t.categories[1]}})],1)])],1)},Pt=[],kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-container"},[i("div",{class:t.categoryClass(t.categoryId),on:{click:function(e){return t.startGame(t.category)}}},[i("div",{staticClass:"card-top"},[i("span",{staticClass:"card-value"},[i("p",[t._v(t._s(t.categorySub))])])]),i("div",{staticClass:"card-body"}),i("div",{staticClass:"card-bottom"},[i("span",{staticClass:"card-value"},[i("p",[t._v(t._s(t.categorySub))])])])])])},Ot=[],Mt=(i("4c53"),{name:"SelectCard",props:{category:Object},data:function(){return{}},computed:Object(O["a"])(Object(O["a"])({},Object(E["c"])("CardGameStore",["language"])),{},{categoryId:function(){return this.category.id},categoryImg:function(){return this.category.path},categorySub:function(){return this.category.sub},categoryClass:function(){return function(t){return 1===t?"card animal-background":"card fruit-background"}}}),mounted:function(){},methods:{startGame:function(t){var e=[t.id,this.language];this.$store.dispatch("CardGameStore/fetchCards",e),this.$router.push({name:"PlayCardGame"})}}}),Et=Mt,Ft=(i("ca9b"),Object(c["a"])(Et,kt,Ot,!1,null,"3e4b3716",null)),Vt=Ft.exports,qt={name:"CardCategory",components:{SelectCard:Vt},watch:{selected_language:function(t){var e=["ko-KR","en-US","zh","ja-JP","vi-VN","fr-FR","es-ES"];this.$store.dispatch("CardGameStore/fetchLanguage",e[t])}},data:function(){return{selected_language:void 0,languages:[{id:0,name:"한국어"},{id:1,name:"영  어"},{id:2,name:"중국어"},{id:3,name:"일본어"},{id:4,name:"베트남어"},{id:5,name:"프랑스어"},{id:6,name:"스페인어"}],categories:[{id:1,name:"Animal",sub:"동물",path:"https://i.pinimg.com/originals/d6/3c/de/d63cded9d8454a5b57ee8bef31c3ee71.gif"},{id:2,name:"Fruit",sub:"과일",path:"https://acegif.com/wp-content/gifs/apple-8.gif"}],page:1}}},Rt=qt,Dt=(i("be2f"),Object(c["a"])(Rt,Ct,Pt,!1,null,"46c3ba3e",null)),Nt=Dt.exports;p()(Dt,{VBtn:D["a"],VBtnToggle:N["a"],VContainer:T["a"],VRow:b["a"]});var Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stepper"},[n("p",{staticClass:"howToPlay"},[t._v("게임 방법")]),n("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:t.e1>1,step:"1"}},[t._v(" 언어 & 카드 선택 ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:t.e1>2,step:"2"}},[t._v(" 게임 시작 ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:t.e1>3,step:"3"}},[t._v(" 정답 보기 ")]),n("v-divider"),n("v-stepper-step",{attrs:{step:"4"}},[t._v(" 게임 즐기기 ")])],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("4242")}})]),n("p",[t._v("🌍 원하는 언어와 카드를 선택해주세요")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{color:"warning"},on:{click:t.playGame}},[t._v(" 게임하기 ")]),n("v-spacer"),n("v-btn",{staticClass:"text--white",attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=2}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"2"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("b2a1")}})]),n("p",[t._v(" 🎙 [녹음] 버튼을 눌러 단어를 말해보세요! ❗❕(주의)❗❕ 한 번 더 눌러야 정답이 제출됩니다 ")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=1}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=3}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"3"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("5616")}})]),n("p",[t._v(" ✅ 목소리를 들려주면 정답 여부를 알려주면서 카드 뒷면의 답을 볼 수 있습니다 ")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=2}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=4}}},[t._v(" 다음 ")])],1)],1),n("v-stepper-content",{attrs:{step:"4"}},[n("v-card",{staticClass:"mb-6",attrs:{color:"grey lighten-1",height:"300px"}},[n("img",{attrs:{src:i("1b86")}})]),n("p",[t._v("🎇 [다음 문제] 버튼을 눌러 게임을 마음껏 즐겨보세요")]),n("div",{staticClass:"d-flex"},[n("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(e){t.e1=3}}},[t._v(" 이전 ")]),n("v-spacer"),n("v-btn",{attrs:{color:"warning"},on:{click:t.playGame}},[t._v(" 게임 시작 ")])],1)],1)],1)],1)],1)},It=[],Ut={data:function(){return{e1:1}},methods:{playGame:function(){this.$emit("stepperDone",!0)}}},Gt=Ut,jt=(i("88d6"),Object(c["a"])(Gt,Bt,It,!1,null,"74ef3a86",null)),Lt=jt.exports;p()(jt,{VBtn:D["a"],VCard:z["a"],VDivider:$["a"],VSpacer:Z["a"],VStepper:W["a"],VStepperContent:X["a"],VStepperHeader:Y["a"],VStepperItems:Y["b"],VStepperStep:Q["a"]});var zt={name:"SelectCardGame",data:function(){return{goToSelect:!1}},components:{CardCategory:Nt,Stepper2:Lt},methods:{moveMainPage:function(){this.$router.push({name:"MainPage"})},stepperDone:function(){this.goToSelect=!0}}},$t=zt,Zt=(i("d783"),Object(c["a"])($t,wt,At,!1,null,"56a6e8ac",null)),Wt=Zt.exports;p()(Zt,{VContainer:T["a"],VTooltip:x["a"]});var Xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","fill-height":""}},[i("div",{staticClass:"background"},[i("div",{attrs:{id:"stars"}}),i("div",{attrs:{id:"stars2"}}),i("div",{attrs:{id:"stars3"}})]),i("div",{staticClass:"contents"},[i("nav",[i("v-tooltip",{attrs:{bottom:"",color:"deep-purple accent-3"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[i("div",t._g(t._b({staticClass:"glow",on:{click:t.moveSelectCardGame}},"div",o,!1),n))]}}])},[i("span",[t._v("카드게임 다시 고르기!")])])],1),t.started?i("p",[t._v(" 녹음버튼을 눌러 정답을 말해보세요 ")]):t._e(),i("div",{staticClass:"game-contents"},[i("div",{staticClass:"countdown-timer"},[t.started?i("Timer",{attrs:{quizIdx:t.quizIdx,resetTime:t.resetTime},on:{solvingStatus:t.is_solved}}):t._e()],1),i("div",{staticClass:"game-field"},[i("div",{staticClass:"card"},[t.started?i("div",[i("QuizCard",{attrs:{currentQuiz:t.currentQuiz,flipped:t.flipped},on:{nextCard:t.nextCard,is_flipped:t.is_flipped}})],1):t.ended?i("button",{staticClass:"gold-button mx-auto",on:{click:function(e){t.openModal=!0}}},[t._v(" 결과 보기 ")]):i("button",{staticClass:"gold-button mx-auto",on:{click:t.getStart}},[t._v(" 게임 시작 ")]),t.openModal?i("ScoreModal",{attrs:{score:t.score},on:{close:function(e){t.openModal=!1}}}):t._e()],1)]),t.started?i("div",{staticClass:"audio-button"},[t.loading?i("div",{staticClass:"loading-circle"},[i("v-progress-circular",{attrs:{indeterminate:"",color:"amber",size:80}})],1):t._e(),i("Audio",{attrs:{quizIdx:t.quizIdx},on:{audioResult:t.onAudioResult,is_flipped:t.is_flipped,is_loading:t.is_loading}})],1):t._e()]),t.alertDialog?i("div",{attrs:{id:"alert"}},[i("div",[i("v-alert",{staticStyle:{position:"fixed",float:"right",bottom:"3%",right:"2%"},attrs:{color:"white",right:"",outlined:"",text:"",type:"success"}},[t._v(" "+t._s(t.alertMessage)+" ")])],1)]):t._e()])])},Yt=[],Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"flip-card",class:{active:t.flip}},[i("div",{staticClass:"flip-card-inner"},[i("div",{staticClass:"flip-card-front",on:{click:t.flipCard}},[t._m(0),i("v-img",{staticClass:"image",staticStyle:{"border-radius":"30px"},attrs:{src:t.cardImg,height:"100%"}})],1),i("div",{staticClass:"flip-card-back",staticStyle:{"border-radius":"30px"}},[t.flip?i("h2",{staticClass:"text-center"},[t._v(t._s(t.cardAnswer))]):t._e()])]),i("div",{staticClass:"d-flex justify-content-center"},[t.flip?i("button",{staticClass:"gold-button mx-auto",on:{click:t.goNext}},[t._v(" 다음 문제 ")]):t._e()])])])},Ht=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overlay",staticStyle:{"border-radius":"30px"}},[i("p",{staticClass:"text"},[t._v("정답을 보고 싶으면 카드를 더블클릭하세요")])])}],Jt={name:"QuizCard",props:{currentQuiz:Object,flipped:Boolean},data:function(){return{flip:!1}},computed:{cardImg:function(){return this.currentQuiz.path},cardAnswer:function(){return this.currentQuiz.word}},watch:{flipped:function(t){!0===t&&this.flipCard()}},methods:{flipCard:function(){this.flip=!this.flip,this.$emit("is_flipped",!0)},goNext:function(){this.flipCard(),this.$emit("nextCard",!0)}}},Kt=Jt,te=(i("0386"),i("adda")),ee=Object(c["a"])(Kt,Qt,Ht,!1,null,"992b877e",null),ie=ee.exports;p()(ee,{VImg:te["a"]});var ne,oe,se,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"base-timer"},[i("svg",{staticClass:"base-timer__svg",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[i("g",{staticClass:"base-timer__circle"},[i("circle",{staticClass:"base-timer__path-elapsed",attrs:{cx:"50",cy:"50",r:"45"}}),i("path",{staticClass:"base-timer__path-remaining",class:t.remainingPathColor,attrs:{"stroke-dasharray":t.circleDasharray,d:"\n            M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "}})])]),i("h1",{staticClass:"label"},[t._v(t._s(t.formattedTimeLeft))])])},ae=[],ce=(i("a9e3"),i("b680"),283),ue=10,pe=5,he=15,le={info:{color:"green"},warning:{color:"orange",threshold:ue},alert:{color:"red",threshold:pe}},de={name:"Timer",props:{quizIdx:Number,resetTime:Boolean},data:function(){return{timePassed:0,timerInterval:null}},computed:{circleDasharray:function(){return"".concat((this.timeFraction*ce).toFixed(0)," 283")},formattedTimeLeft:function(){var t=this.timeLeft,e=t%60;return e<10&&(e="0".concat(e)),"".concat(e)},timeLeft:function(){return he-this.timePassed},timeFraction:function(){var t=this.timeLeft/he;return t-1/he*(1-t)},remainingPathColor:function(){var t=le.alert,e=le.warning,i=le.info;return this.timeLeft<=t.threshold?t.color:this.timeLeft<=e.threshold?e.color:i.color}},watch:{quizIdx:function(t){t<15&&this.start()},timePassed:function(t){15===t&&(this.onTimesUp(),this.$emit("solvingStatus",!1))},resetTime:function(t){!0===t&&this.onTimesUp()}},mounted:function(){0===this.quizIdx&&this.start()},methods:{moveNext:function(){this.onTimesUp()},onTimesUp:function(){clearInterval(this.timerInterval),this.timePassed=15},start:function(){var t=this;this.timePassed=0,this.timerInterval=setInterval((function(){return t.timePassed+=1}),1e3)}}},fe=de,me=(i("9777"),Object(c["a"])(fe,re,ae,!1,null,"d130cce6",null)),ve=me.exports,ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"frame"},[i("div",{staticClass:"center"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isRecorded,expression:"isRecorded"}],attrs:{type:"checkbox",id:"audio-record"},domProps:{checked:Array.isArray(t.isRecorded)?t._i(t.isRecorded,null)>-1:t.isRecorded},on:{change:function(e){var i=t.isRecorded,n=e.target,o=!!n.checked;if(Array.isArray(i)){var s=null,r=t._i(i,s);n.checked?r<0&&(t.isRecorded=i.concat([s])):r>-1&&(t.isRecorded=i.slice(0,r).concat(i.slice(r+1)))}else t.isRecorded=o}}}),i("label",{attrs:{for:"audio-record"}},[i("svg",{attrs:{width:"100px",height:"100px",viewBox:"0 0 100 100"}},[i("circle",{staticClass:"circle",attrs:{cx:"50",cy:"50",r:"47"}})]),t._m(0),t._m(1)])])])},ge=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icone"},[i("div"),i("div"),i("div")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dots"},[i("div"),i("div"),i("div")])}],_e=(i("c19f"),i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("493a"),i("237d")),Te=i.n(_e),be={name:"Audio",data:function(){return{isRecorded:!1}},props:{quizIdx:Number},computed:Object(O["a"])({},Object(E["c"])("CardGameStore",["playingCards","language"])),watch:{isRecorded:function(t){var e=this;!0===t?(this.load(),setTimeout((function(){e.startRecord()}),500)):this.endRecord()}},methods:{load:function(){ne=new Te.a.AudioIn,ne.start(),oe=new Te.a.SoundRecorder,oe.setInput(ne),se=new Te.a.SoundFile},startRecord:function(){if(ne.enabled){var t=new Te.a;t.getAudioContext().resume(),oe.record(se)}},endRecord:function(){var t=this;oe.stop(),setTimeout((function(){t.store()}),200)},store:function(){var t=this;if(null==se.buffer)this.$store.dispatch("CardGameStore/fetchAlertMessage","소리를 잘 못들었어요ㅠㅠ"),this.$emit("is_loading",!1),this.$emit("is_flipped",!0);else{this.$emit("is_loading",!0);var e=this.convertToWav(se.buffer);setTimeout((function(){t.writeFile([e],"record","wav")}),200)}},convertToWav:function(t){var e,i;e=t.getChannelData(0),i=t.numberOfChannels>1?t.getChannelData(1):e;var n=this.interleave(e,i),o=new window.ArrayBuffer(44+2*n.length),s=new window.DataView(o);this.writeUTFBytes(s,0,"RIFF"),s.setUint32(4,36+2*n.length,!0),this.writeUTFBytes(s,8,"WAVE"),this.writeUTFBytes(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,2,!0),s.setUint32(24,44100,!0),s.setUint32(28,176400,!0),s.setUint16(32,4,!0),s.setUint16(34,16,!0),this.writeUTFBytes(s,36,"data"),s.setUint32(40,2*n.length,!0);for(var r=n.length,a=44,c=1,u=0;u<r;u++)s.setInt16(a,n[u]*(32767*c),!0),a+=2;return s},interleave:function(t,e){for(var i=t.length+e.length,n=new Float32Array(i),o=0,s=0;s<i;)n[s++]=t[o],n[s++]=e[o],o++;return n},writeUTFBytes:function(t,e,i){for(var n=i.length,o=0;o<n;o++)t.setUint8(e+o,i.charCodeAt(o))},writeFile:function(t){var e=this,i="application/octet-stream";Te.a.prototype._isSafari()&&(i="text/plain");var n=new Blob(t,{type:i}),o=new FormData;o.append("file",n),o.append("code",this.language);var s={"Content-Type":"multipart/form-data"};tt.a.post("https://ssokssok.site/card-api/stt/convert",o,s).then((function(t){var i=e.playingCards,n=e.quizIdx,o=t.data.object;null==o?(e.$store.dispatch("CardGameStore/fetchAlertMessage","소리를 잘 못들었어요ㅠㅠ"),e.$emit("is_loading",!1),e.$emit("is_flipped",!0)):("en-US"!==e.language&&"vi-VN"!==e.language&&"fr-FR"!==e.language&&"es-ES"!==e.language||(o=o.toLowerCase()),o===i[n].word?(e.$store.dispatch("CardGameStore/fetchAlertMessage","정답입니다!"),e.$emit("audioResult",!0),e.$emit("is_loading",!1),e.$emit("is_flipped",!0)):(e.$store.dispatch("CardGameStore/fetchAlertMessage","틀렸어요ㅠㅠ"),e.$emit("is_loading",!1),e.$emit("is_flipped",!0)))})).catch((function(t){return console.log(t)}))}}},xe=be,Se=(i("99fb"),Object(c["a"])(xe,ye,ge,!1,null,"6e1a6319",null)),we=Se.exports,Ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-mask"},[i("div",{staticClass:"modal-wrapper"},[i("div",{staticClass:"modal-container"},[t._m(0),i("div",{staticClass:"modal-body"},[i("p",[t._v(t._s(t.score)+"/5")])]),i("div",{staticClass:"modal-footer"},[i("button",{on:{click:t.goToGame}},[t._v("다시하기")])])])])])},Ce=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("p",[t._v("✨당신의 점수는?✨")])])}],Pe={name:"ScoreModal",props:{score:Number},methods:{goToGame:function(){this.$router.push({name:"SelectCardGame"})}}},ke=Pe,Oe=(i("1426"),Object(c["a"])(ke,Ae,Ce,!1,null,"0bd4df19",null)),Me=Oe.exports,Ee={name:"PlayCardGame",components:{QuizCard:ie,Timer:ve,Audio:we,ScoreModal:Me},data:function(){return{quizIdx:0,started:!1,ended:!1,solvingStatus:!1,flipped:!1,resetTime:!1,openModal:!1,score:0,snackbar:!1,loading:!1}},computed:Object(O["a"])(Object(O["a"])({},Object(E["c"])("CardGameStore",["playingCards","alertMessage","alertDialog"])),{},{currentQuiz:function(){return this.sendCurrentQuiz(this.quizIdx)}}),watch:{solvingStatus:function(t){!1===t&&(this.flipped=!0)}},created:function(){this.solvingStatus=!1},methods:{sendCurrentQuiz:function(t){if(t<this.playingCards.length)return this.playingCards[t];this.started=!1,this.ended=!0,this.quizIdx=0},is_solved:function(t){!1===t&&(this.solvingStatus=t,this.flipped=!0)},is_flipped:function(t){this.resetTime=!0},nextCard:function(t){!0===t&&(this.quizIdx+=1,this.solvingStatus=!0,this.flipped=!1,this.resetTime=!1)},getStart:function(){this.started=!0},moveSelectCardGame:function(){this.$router.push({name:"SelectCardGame"})},onAudioResult:function(t){!0===t&&(this.score+=1,this.snackbar=!0)},is_loading:function(t){this.loading=t}}},Fe=Ee,Ve=(i("4f6d"),i("0798")),qe=i("490a"),Re=Object(c["a"])(Fe,Xt,Yt,!1,null,"54528fd8",null),De=Re.exports;p()(Re,{VAlert:Ve["a"],VContainer:T["a"],VProgressCircular:qe["a"],VTooltip:x["a"]});var Ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","fill-height":""}},[i("div",{staticClass:"background"},[i("div",{attrs:{id:"stars"}}),i("div",{attrs:{id:"stars2"}}),i("div",{attrs:{id:"stars3"}})]),i("div",{staticClass:"contents"},[i("div",{staticClass:"body"},[i("p",[t._v("페이지를 찾을 수 없습니다.")]),i("p",[t._v("홈페이지로 돌아가려면 아래의 버튼을 눌러주세요.")]),i("div",{staticClass:"glow",on:{click:t.moveWelcomePage}})])])])},Be=[],Ie={name:"FrontendPagenotfound",data:function(){return{}},methods:{moveWelcomePage:function(){this.$router.push({name:"WelcomePage"})}}},Ue=Ie,Ge=(i("b14d"),Object(c["a"])(Ue,Ne,Be,!1,null,"39c9b531",null)),je=Ge.exports;p()(Ge,{VContainer:T["a"]}),n["a"].use(m["a"]);var Le,ze=[{path:"/",name:"WelcomePage",component:St},{path:"*",redirect:"/404"},{path:"/404",name:"PageNotFound",component:je},{path:"/main",name:"MainPage",component:w},{path:"/smartcameragame",name:"SmartCameraGame",component:at},{path:"/selectcardgame",name:"SelectCardGame",component:Wt},{path:"/playcardgame",name:"PlayCardGame",component:De}],$e=new m["a"]({mode:"history",routes:ze}),Ze=$e,We=i("0e44"),Xe=(i("b0c0"),{namespaced:!0,state:{authenticated:!1,currentUser:null,userName:null},mutations:{SET_USER:function(t,e){t.authenticated=!0,t.currentUser=e,t.userName=e.data.name},LOGOUT:function(t){t.authenticated=!1,t.currentUser=null}},getters:{getCheckLogin:function(t){return t.authenticated}},actions:{fetchUser:function(t){var e=t.commit;tt()({url:"https://ssokssok.site/api/user/me",method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem(yt)}}).then((function(t){e("SET_USER",t)})).catch((function(t){console.log(t)}))},logout:function(t){var e=t.commit;localStorage.removeItem(yt),e("LOGOUT")}}}),Ye=Xe,Qe={namespaced:!0,state:{score:0,category:"",is_correct:!1,is_done:!1},getters:{getScore:function(t){return t.score},getCategory:function(t){return t.category},getIsCorrect:function(t){return t.is_correct},getIsDone:function(t){return t.is_done}},mutations:{SET_INFO:function(t,e){var i=e.info;t.is_correct=e.is_correct,"number"===typeof i?t.score=i:t.category=i,t.is_done=!0},INITIALIZE_INFO:function(t){t.score=0,t.category="",t.is_correct=!1,t.is_done=!1}},actions:{setInfo:function(t,e){var i=t.commit;i("SET_INFO",e)},initializeInfo:function(t){var e=t.commit;e("INITIALIZE_INFO")}}},He=Qe,Je=(i("99af"),{namespaced:!0,state:{playingCards:[],language:"",alertMessage:"",alertDialog:!1},getters:{},mutations:{SET_CARDS:function(t,e){t.playingCards=e},SET_LANGUAGE:function(t,e){t.language=e},SET_ALERT_MESSAGE:function(t,e){t.alertDialog=!0,t.alertMessage=e},CANCEL_ALERT_MESSAGE:function(t){t.alertDialog=!1}},actions:{fetchCards:function(t,e){var i=t.commit,n=e[0],o=e[1];tt.a.get("https://ssokssok.site/card-api/card/".concat(n,"/").concat(o)).then((function(t){i("SET_CARDS",t.data.object)})).catch((function(t){console.log(t)}))},fetchLanguage:function(t,e){var i=t.commit;i("SET_LANGUAGE",e)},fetchAlertMessage:function(t,e){var i=t.commit;i("SET_ALERT_MESSAGE",e),setTimeout((function(){i("CANCEL_ALERT_MESSAGE")}),2e3)}}}),Ke=Je;n["a"].use(E["a"]);var ti=new E["a"].Store({modules:{UserStore:Ye,SmartCameraStore:He,CardGameStore:Ke},plugins:[Object(We["a"])((Le={paths:["UserStore"]},Object(P["a"])(Le,"paths",["SmartCameraStore"]),Object(P["a"])(Le,"paths",["CardGameStore"]),Le))]}),ei=i("f309");n["a"].use(ei["a"]);var ii=new ei["a"]({}),ni=i("c115"),oi=i.n(ni);n["a"].use(oi.a),n["a"].config.productionTip=!1,new n["a"]({router:Ze,store:ti,vuetify:ii,render:function(t){return t(f)}}).$mount("#app")},"5ac6":function(t,e,i){},"5d71":function(t,e,i){"use strict";i("5ac6")},"5edb":function(t,e,i){},"67e3":function(t,e,i){t.exports=i.p+"img/step2.0bb75734.jpg"},6959:function(t,e,i){},"6b4e":function(t,e,i){},7288:function(t,e,i){t.exports=i.p+"img/mascot-camera.0a9e0e6a.png"},"7cdd":function(t,e,i){t.exports=i.p+"img/step4.698ed98d.jpg"},"88d6":function(t,e,i){"use strict";i("6959")},"902d":function(t,e,i){},9090:function(t,e,i){t.exports=i.p+"img/welcome-icon.d5ccf999.png"},9230:function(t,e,i){t.exports=i.p+"img/venus.23507588.png"},9435:function(t,e,i){"use strict";i("dbbc")},9777:function(t,e,i){"use strict";i("22b3")},"99fb":function(t,e,i){"use strict";i("6b4e")},a412:function(t,e,i){t.exports=i.p+"img/step1.bf2242ae.jpg"},a863:function(t,e,i){"use strict";i("006a")},a8c8:function(t,e,i){},a9c4:function(t,e,i){t.exports=i.p+"img/mascot-card.413c8efe.png"},b14d:function(t,e,i){"use strict";i("beac")},b2a1:function(t,e,i){t.exports=i.p+"img/cardStep2.2511283c.jpg"},be2f:function(t,e,i){"use strict";i("23bd")},beac:function(t,e,i){},c534:function(t,e,i){t.exports=i.p+"img/greenus.a393f14c.png"},ca9b:function(t,e,i){"use strict";i("0a6f")},cb05:function(t,e,i){"use strict";i("a8c8")},ccfa:function(t,e,i){},d783:function(t,e,i){"use strict";i("3c43")},d981:function(t,e,i){t.exports=i.p+"img/mascot-fail.964b7630.png"},dbbc:function(t,e,i){},e27e:function(t,e,i){t.exports=i.p+"img/mascot-success.89e3c287.png"},e4be:function(t,e,i){},fd91:function(t,e,i){"use strict";i("36d4")},fe4d:function(t,e,i){}});
//# sourceMappingURL=app.9d6dd7ae.js.map